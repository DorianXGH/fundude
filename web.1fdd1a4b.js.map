{"version":3,"sources":["../src/options.js","../src/constants.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","../src/index.js","../src/check-props.js","../src/devtools/custom.js","../src/debug.js","../src/devtools/renderer.js","../src/devtools/10/IdMapper.js","../src/devtools/10/string-table.js","../src/devtools/10/vnode.js","../src/devtools/10/filter.js","../src/devtools/10/utils.js","../src/devtools/10/constants.js","../src/devtools/10/renderer.js","../src/devtools/index.js","../src/PureComponent.js","../src/memo.js","../src/forwardRef.js","../src/Children.js","../src/suspense.js","../src/suspense-list.js","../src/portals.js","../src/events.js","../../node_modules/react-use/lib/util.js","../../node_modules/react-use/lib/useEvent.js","../../node_modules/nano-css/index.js","../../node_modules/nano-css/addon/rule.js","../../node_modules/nano-css/addon/cache.js","../../node_modules/nano-css/addon/hydrate.js","../../node_modules/nano-css/addon/nesting.js","nano.ts","../wasm/PicoSignal.ts","../wasm/index.ts","../wasm/react.tsx","../../node_modules/classnames/index.js","Display.tsx","smalldash.ts","promise.ts","../roms/index.ts","../roms/debug/blargg/index.ts","../roms/debug/index.ts","CartSelect.tsx","Controller.tsx","data.ts","../../node_modules/parcel-bundler/src/builtins/bundle-url.js","../../node_modules/parcel-bundler/src/builtins/bundle-loader.js","logo.svg","App.tsx","Toaster.tsx","Page.tsx","index.tsx","../../node_modules/parcel-bundler/src/builtins/loaders/browser/wasm-loader.js","../../node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["options","isValidElement","q","defer","prevDebounce","IS_HYDRATE","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","arguments","length","push","defaultProps","createVNode","key","ref","vnode","_children","_parent","_depth","_dom","_lastDomChild","_component","constructor","createRef","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","p","component","commitQueue","newDom","oldDom","parentDom","sort","a","b","_vnode","pop","_parentDom","diff","_context","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","isSvg","excessDomChildren","isHydrating","j","oldVNode","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","undefined","outer","appendChild","nextSibling","insertBefore","value","unmount","applyRef","callback","flattened","Array","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","name","oldValue","s","useCapture","nameLower","cssText","replace","toLowerCase","slice","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","event","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","cctx","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","prototype","render","doRender","sub","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","_force","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","some","cb","call","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_this","_props","old","splice","error","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","setTimeout","loggedTypeFailures","getNodeType","getDisplayName","displayName","setIn","path","last","parent","reduce","acc","attr","getData","updater","setInState","prev","setInProps","setInContext","getChildren","duration","endTime","startTime","text","publicInstance","getInstance","memoizedInteractions","actualDuration","actualStartTime","treeBaseDuration","filter","Boolean","isRoot","shallowEqual","isProps","Object","keys","isWeakMapSupported","WeakMap","console","warn","serializeVNode","attrs","prop","hasOwnProperty","toString","JSON","stringify","Renderer","hook","rid","pending","inst2vnode","connected","markConnected","flushPendingEvents","events","emit","mount","set","work","internalInstance","renderer","item","stack","inst","get","next","_prevState","handleCommitFiberRoot","has","handleCommitFiberUnmount","delete","getNativeFromReactElement","getReactElementFromNative","walkTree","cleanup","getStringId","table","input","size","encoded","Map","toCodePoint","codePointAt","getActualChildren","shouldFilter","filters","regex","jsonify","getVNode","seen","Set","map","x","add","out","forEach","cleanProps","reg","HTML_ELEMENT","CLASS_COMPONENT","FUNCTION_COMPONENT","FORWARD_REF","MEMO","SUSPENSE","ADD_ROOT","ADD_VNODE","REMOVE_VNODE","UPDATE_VNODE_TIMINGS","REORDER_CHILDREN","memoReg","forwardRefReg","getDevtoolsType","_suspensions","flush","commit","ops","unmountIds","operations","msg","rootId","strings","_","k","split","defaultFilters","createCommit","ids","roots","domCache","parentId","hasId","createId","getId","ancestorId","id","shouldReorder","nextChildren","reverse","skip","catchErrors","fn","noop","now","Date","performance","currentIndex","currentComponent","prevRaf","afterPaintEffects","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","_hook","hooks","__hooks","_list","_pendingEffects","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_value","action","nextValue","useEffect","args","argsChanged","_args","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","_factory","useCallback","useContext","useDebugValue","formatter","flushAfterPaintEffects","invokeCleanup","invokeEffect","_cleanup","result","oldArgs","newArgs","arg","f","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","window","shallowDiffers","PureComponent","isPureReactComponent","memo","comparer","shouldUpdate","nextProps","updateRef","Memoed","isReactComponent","_forwarded","oldVNodeHook","forwardRef","Forwarded","clone","mapFn","Children","count","only","Error","toArray","oldCatchError","detachedClone","Suspense","_detachOnNextRender","suspended","_suspended","lazy","loader","prom","Lazy","exports","default","SuspenseList","_next","_map","_childDidSuspend","promise","suspendingComponent","resolved","onResolved","onSuspensionComplete","_suspendedComponentWillUnmount","fallback","list","revealOrder","delegated","unsuspend","wrappedUnsuspend","ContextProvider","Portal","container","wrap","_container","_temp","_unmount","_wrap","_hasMounted","createPortal","CAMEL_PROPS","REACT_ELEMENT_TYPE","Symbol","for","firstChild","preactRender","oldEventHook","setSafeDescriptor","proto","defineProperty","configurable","v","persist","nativeEvent","classNameDescriptor","class","$$typeof","shouldSanitize","multiple","selected","className","enumerable","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","version","createFactory","element","preactCloneElement","apply","unmountComponentAtNode","findDOMNode","unstable_batchedUpdates","KEBAB_REGEX","hash","str","charCodeAt","create","config","client","raw","pfx","kebab","decl","selector","putRaw","rawCssRule","sh","head","sheet","insertRule","cssRules","put","decls","atrule","postponed","putAt","addon","rule","css","block","hydrated","selectorText","bundleURL","getBundleURLCached","getBundleURL","err","matches","match","getBaseURL","url","require","loadBundlesLazy","bundles","code","LazyPromise","reject","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","module","load","register","bundle","substring","lastIndexOf","bundleLoader","catch","executor","onSuccess","onError","SvgLogo","_extends","target","source","_ref","React","fill","d","width","height","viewBox","fetch","res","WebAssembly","instantiateStreaming","arrayBuffer","instantiate","wasmModule","instance","script","async","charset","src","onerror","onload","getElementsByTagName"],"mappings":"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","file":"web.1fdd1a4b.js","sourceRoot":"../src/web","sourcesContent":["import { _catchError } from './diff/catch-error';\n\n/** @type {import('./internal').Options}  */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_lastDomChild: null,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tthis._force = false;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._context,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet q = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && q.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet p;\n\tq.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((p = q.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tcontext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (childVNode._lastDomChild != null) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-null _lastDomChild. Continue the diff from the end of\n\t\t\t\t\t\t// this Fragment's DOM tree.\n\t\t\t\t\t\tnewDom = childVNode._lastDomChild;\n\n\t\t\t\t\t\t// Eagerly cleanup _lastDomChild. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments.\n\t\t\t\t\t\tchildVNode._lastDomChild = null;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toldDom = newDom.nextSibling;\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// At this point, if childVNode._lastDomChild existed, then\n\t\t\t\t\t\t// newDom = childVNode._lastDomChild per line 101. Else it is\n\t\t\t\t\t\t// the same as childVNode._dom, meaning this component returned\n\t\t\t\t\t\t// only a single DOM node\n\t\t\t\t\t\tnewParentVNode._lastDomChild = newDom;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (value == null || value === false) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren, toChildArray } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && context[tmp._id];\n\t\t\tlet cctx = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: context;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, cctx); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, cctx);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = cctx;\n\t\t\t\tc._context = context;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc._force == null &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, cctx) === false\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = cctx;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = toChildArray(\n\t\t\t\tisTopLevelFragment ? tmp.props.children : tmp\n\t\t\t);\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = null;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (dom == null && excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t(newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(newVNode.type);\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t}\n\n\t\tif (oldProps !== newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tapplyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\tvnode._dom = vnode._lastDomChild = null;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t} else if (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { initDebug } from './debug';\nimport { initDevTools } from './devtools';\n\nif (process.env.NODE_ENV === 'development') {\n\tinitDebug();\n\tinitDevTools();\n}\n","const ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nlet loggedTypeFailures = {};\n\nexport function checkPropTypes(\n\ttypeSpecs,\n\tvalues,\n\tlocation,\n\tcomponentName,\n\tgetStack\n) {\n\tObject.keys(typeSpecs).forEach(typeSpecName => {\n\t\tlet error;\n\t\ttry {\n\t\t\terror = typeSpecs[typeSpecName](\n\t\t\t\tvalues,\n\t\t\t\ttypeSpecName,\n\t\t\t\tcomponentName,\n\t\t\t\tlocation,\n\t\t\t\tnull,\n\t\t\t\tReactPropTypesSecret\n\t\t\t);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tif (error && !(error.message in loggedTypeFailures)) {\n\t\t\tloggedTypeFailures[error.message] = true;\n\t\t\tconsole.error(\n\t\t\t\t`Failed ${location} type: ${error.message}${(getStack && getStack()) ||\n\t\t\t\t\t''}`\n\t\t\t);\n\t\t}\n\t});\n}\n","/* istanbul ignore file */\nimport { Component, Fragment } from 'preact';\n\n/**\n * Get the type/category of a vnode\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').NodeType}\n */\nexport function getNodeType(vnode) {\n\tif (vnode.type === Fragment) return 'Wrapper';\n\telse if (typeof vnode.type === 'function') return 'Composite';\n\telse if (typeof vnode.type === 'string') return 'Native';\n\treturn 'Text';\n}\n\n/**\n * Get human readable name of the component/dom element\n * @param {import('../internal').VNode} vnode\n * @returns {string}\n */\nexport function getDisplayName(vnode) {\n\tif (vnode.type === Fragment) {\n\t\treturn 'Fragment';\n\t} else if (typeof vnode.type === 'function') {\n\t\treturn vnode.type.displayName || vnode.type.name;\n\t} else if (typeof vnode.type === 'string') {\n\t\treturn vnode.type;\n\t}\n\n\treturn '#text';\n}\n\n/**\n * Deeply mutate a property by walking down an array of property keys\n * @param {object} obj\n * @param {Array<string | number>} path\n * @param {any} value\n */\nexport function setIn(obj, path, value) {\n\tlet last = path.pop();\n\tlet parent = path.reduce((acc, attr) => (acc ? acc[attr] : null), obj);\n\tif (parent) {\n\t\tparent[last] = value;\n\t}\n}\n\n/**\n * Get devtools compatible data from vnode\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').DevtoolData}\n */\nexport function getData(vnode) {\n\tlet c = vnode._component;\n\n\t/** @type {import('../internal').DevtoolsUpdater | null} */\n\tlet updater = null;\n\n\tif (c != null && c instanceof Component) {\n\t\t// These functions will be called when the user changes state, props or\n\t\t// context values via the devtools ui panel\n\t\tupdater = {\n\t\t\tsetState: c.setState.bind(c),\n\t\t\tforceUpdate: c.forceUpdate.bind(c),\n\t\t\tsetInState(path, value) {\n\t\t\t\tc.setState(prev => {\n\t\t\t\t\tsetIn(prev, path, value);\n\t\t\t\t\treturn prev;\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetInProps(path, value) {\n\t\t\t\tsetIn(vnode.props, path, value);\n\t\t\t\tc.setState({});\n\t\t\t},\n\t\t\tsetInContext(path, value) {\n\t\t\t\tsetIn(c.context, path, value);\n\t\t\t\tc.setState({});\n\t\t\t}\n\t\t};\n\t}\n\n\tlet children = getChildren(vnode);\n\n\tlet duration = vnode.endTime - vnode.startTime;\n\treturn {\n\t\tnodeType: getNodeType(vnode),\n\t\ttype: vnode.type,\n\t\tname: getDisplayName(vnode),\n\t\tref: vnode.ref || null,\n\t\tkey: vnode.key || null,\n\t\tupdater,\n\t\ttext: vnode.type === null ? vnode.props : null,\n\t\tstate: c != null && c instanceof Component ? c.state : null,\n\t\tprops: vnode.props,\n\t\t// The devtools inline text children if they are the only child\n\t\tchildren:\n\t\t\tvnode.type !== null\n\t\t\t\t? children != null && children.length == 1 && children[0].type === null\n\t\t\t\t\t? children[0].props\n\t\t\t\t\t: children\n\t\t\t\t: null,\n\t\tpublicInstance: getInstance(vnode),\n\t\tmemoizedInteractions: [],\n\n\t\t// Profiler data\n\t\tactualDuration: duration,\n\t\tactualStartTime: vnode.startTime,\n\t\ttreeBaseDuration: duration\n\t};\n}\n\n/**\n * Get all rendered vnode children as an array. Moreover we need to filter\n * out `null` or other falsy children.\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').VNode[]}\n */\nexport function getChildren(vnode) {\n\tif (vnode._component == null) {\n\t\treturn vnode._children != null ? vnode._children.filter(Boolean) : [];\n\t}\n\n\treturn vnode._children != null ? vnode._children.filter(Boolean) : null;\n}\n\n/**\n * Check if a vnode is a root node\n * @param {import('../internal').VNode} vnode\n * @returns {boolean}\n */\nexport function isRoot(vnode) {\n\t// Timings of root vnodes will never be set\n\treturn vnode.type === Fragment && vnode._parent === null;\n}\n\n/**\n * Cache a vnode by its instance and retrieve previous vnodes by the next\n * instance.\n *\n * We need this to be able to identify the previous vnode of a given instance.\n * For components we want to check if we already rendered it and use the class\n * instance as key. For html elements we use the dom node as key.\n *\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').Component | import('../internal').PreactElement | Text | null}\n */\nexport function getInstance(vnode) {\n\t// Use the parent element as instance for root nodes\n\tif (isRoot(vnode)) {\n\t\t// Edge case: When the tree only consists of components that have not rendered\n\t\t// anything into the DOM we revert to using the vnode as instance.\n\t\treturn vnode._children.length > 0 &&\n\t\t\tvnode._children[0] != null &&\n\t\t\tvnode._children[0]._dom != null\n\t\t\t? /** @type {import('../internal').PreactElement | null} */\n\t\t\t  (vnode._children[0]._dom.parentNode)\n\t\t\t: vnode;\n\t}\n\tif (vnode._component != null) return vnode._component;\n\tif (vnode.type === Fragment) return vnode.props;\n\treturn vnode._dom;\n}\n\n/**\n * Compare two objects\n * @param {object} a\n * @param {object} b\n * @param {boolean} [isProps]\n * @returns {boolean}\n */\nexport function shallowEqual(a, b, isProps) {\n\tif (a == null || b == null) return false;\n\n\tfor (let key in a) {\n\t\tif (isProps && key == 'children' && b[key] != null) continue;\n\t\tif (a[key] !== b[key]) return false;\n\t}\n\n\tif (Object.keys(a).length !== Object.keys(b).length) return false;\n\treturn true;\n}\n\n/**\n * Check if a vnode was actually updated\n * @param {import('../internal').VNode} next\n * @param {import('../internal').VNode} prev\n * @returns {boolean}\n */\nexport function hasDataChanged(prev, next) {\n\treturn (\n\t\t(prev.props !== next.props &&\n\t\t\t!shallowEqual(prev.props, next.props, true)) ||\n\t\t(prev._component != null &&\n\t\t\t!shallowEqual(next._component._prevState, next._component.state)) ||\n\t\tprev._dom !== next._dom ||\n\t\tprev.ref !== next.ref\n\t);\n}\n","import { checkPropTypes } from './check-props';\nimport { getDisplayName } from './devtools/custom';\nimport { options, Component } from 'preact';\nimport {\n\tELEMENT_NODE,\n\tDOCUMENT_NODE,\n\tDOCUMENT_FRAGMENT_NODE\n} from './constants';\n\nconst isWeakMapSupported = typeof WeakMap === 'function';\n\nfunction getClosestDomNodeParent(parent) {\n\tif (!parent) return {};\n\tif (typeof parent.type === 'function') {\n\t\treturn getClosestDomNodeParent(parent._parent);\n\t}\n\treturn parent;\n}\n\nexport function initDebug() {\n\t/* eslint-disable no-console */\n\tlet oldBeforeDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldVnode = options.vnode;\n\tlet oldCatchError = options._catchError;\n\tlet oldRoot = options._root;\n\tlet oldHook = options._hook;\n\tconst warnedComponents = !isWeakMapSupported\n\t\t? null\n\t\t: {\n\t\t\t\tuseEffect: new WeakMap(),\n\t\t\t\tuseLayoutEffect: new WeakMap(),\n\t\t\t\tlazyPropTypes: new WeakMap()\n\t\t  };\n\n\toptions._catchError = (error, vnode, oldVNode) => {\n\t\tlet component = vnode && vnode._component;\n\t\tif (component && typeof error.then === 'function') {\n\t\t\tconst promise = error;\n\t\t\terror = new Error(\n\t\t\t\t`Missing Suspense. The throwing component was: ${getDisplayName(vnode)}`\n\t\t\t);\n\n\t\t\tlet parent = vnode;\n\t\t\tfor (; parent; parent = parent._parent) {\n\t\t\t\tif (parent._component && parent._component._childDidSuspend) {\n\t\t\t\t\terror = promise;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// We haven't recovered and we know at this point that there is no\n\t\t\t// Suspense component higher up in the tree\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\toldCatchError(error, vnode, oldVNode);\n\t};\n\n\toptions._root = (vnode, parentNode) => {\n\t\tif (!parentNode) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined parent passed to render(), this is the second argument.\\n' +\n\t\t\t\t\t'Check if the element is available in the DOM/has the correct id.'\n\t\t\t);\n\t\t}\n\t\tlet isValid;\n\t\tswitch (parentNode.nodeType) {\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tcase DOCUMENT_NODE:\n\t\t\t\tisValid = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tisValid = false;\n\t\t}\n\t\tif (!isValid) {\n\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\tthrow new Error(\n\t\t\t\t`Expected a valid HTML node as a second argument to render.\tReceived ${parentNode} instead: render(<${componentName} />, ${parentNode});`\n\t\t\t);\n\t\t}\n\n\t\tif (oldRoot) oldRoot(vnode, parentNode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tlet { type, _parent: parent } = vnode;\n\t\tlet parentVNode = getClosestDomNodeParent(parent);\n\n\t\tif (type === undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined component passed to createElement()\\n\\n' +\n\t\t\t\t\t'You likely forgot to export your component or might have mixed up default and named imports' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t} else if (type != null && typeof type === 'object') {\n\t\t\tif (type._lastDomChild !== undefined && type._dom !== undefined) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Invalid type passed to createElement(): ${type}\\n\\n` +\n\t\t\t\t\t\t'Did you accidentally pass a JSX literal as JSX twice?\\n\\n' +\n\t\t\t\t\t\t`  let My${getDisplayName(vnode)} = ${serializeVNode(type)};\\n` +\n\t\t\t\t\t\t`  let vnode = <My${getDisplayName(vnode)} />;\\n\\n` +\n\t\t\t\t\t\t'This usually happens when you export a JSX literal and not the component.'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid type passed to createElement(): ' +\n\t\t\t\t\t(Array.isArray(type) ? 'array' : type)\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t(type === 'thead' || type === 'tfoot' || type === 'tbody') &&\n\t\t\tparentVNode.type !== 'table'\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent.' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t} else if (\n\t\t\ttype === 'tr' &&\n\t\t\t(parentVNode.type !== 'thead' &&\n\t\t\t\tparentVNode.type !== 'tfoot' &&\n\t\t\t\tparentVNode.type !== 'tbody' &&\n\t\t\t\tparentVNode.type !== 'table')\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent.' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t} else if (type === 'td' && parentVNode.type !== 'tr') {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <td> should have a <tr> parent.' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t} else if (type === 'th' && parentVNode.type !== 'tr') {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <th> should have a <tr>.' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tvnode.ref !== undefined &&\n\t\t\ttypeof vnode.ref !== 'function' &&\n\t\t\ttypeof vnode.ref !== 'object' &&\n\t\t\t!('$$typeof' in vnode) // allow string refs when preact-compat is installed\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\n\t\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (typeof vnode.type === 'string') {\n\t\t\tfor (const key in vnode.props) {\n\t\t\t\tif (\n\t\t\t\t\tkey[0] === 'o' &&\n\t\t\t\t\tkey[1] === 'n' &&\n\t\t\t\t\ttypeof vnode.props[key] !== 'function' &&\n\t\t\t\t\tvnode.props[key] != null\n\t\t\t\t) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Component's \"${key}\" property should be a function, ` +\n\t\t\t\t\t\t\t`but got [${typeof vnode.props[key]}] instead\\n` +\n\t\t\t\t\t\t\tserializeVNode(vnode)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check prop-types if available\n\t\tif (typeof vnode.type === 'function' && vnode.type.propTypes) {\n\t\t\tif (\n\t\t\t\tvnode.type.displayName === 'Lazy' &&\n\t\t\t\twarnedComponents &&\n\t\t\t\t!warnedComponents.lazyPropTypes.has(vnode.type)\n\t\t\t) {\n\t\t\t\tconst m =\n\t\t\t\t\t'PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ';\n\t\t\t\ttry {\n\t\t\t\t\tconst lazyVNode = vnode.type();\n\t\t\t\t\twarnedComponents.lazyPropTypes.set(vnode.type, true);\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + `Component wrapped in lazy() is ${getDisplayName(lazyVNode)}`\n\t\t\t\t\t);\n\t\t\t\t} catch (promise) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + \"We will log the wrapped component's name once it is loaded.\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcheckPropTypes(\n\t\t\t\tvnode.type.propTypes,\n\t\t\t\tvnode.props,\n\t\t\t\tgetDisplayName(vnode),\n\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n\t};\n\n\toptions._hook = comp => {\n\t\tif (!comp) {\n\t\t\tthrow new Error('Hook can only be invoked from render methods.');\n\t\t}\n\n\t\tif (oldHook) oldHook(comp);\n\t};\n\n\tconst warn = (property, err) => ({\n\t\tget() {\n\t\t\tthrow new Error(`getting vnode.${property} is deprecated, ${err}`);\n\t\t},\n\t\tset() {\n\t\t\tthrow new Error(`setting vnode.${property} is not allowed, ${err}`);\n\t\t}\n\t});\n\n\tconst deprecatedAttributes = {\n\t\tnodeName: warn('nodeName', 'use vnode.type'),\n\t\tattributes: warn('attributes', 'use vnode.props'),\n\t\tchildren: warn('children', 'use vnode.props.children')\n\t};\n\n\toptions.vnode = vnode => {\n\t\tlet source, self;\n\t\tif (vnode.props && vnode.props.__source) {\n\t\t\tsource = vnode.props.__source;\n\t\t\tdelete vnode.props.__source;\n\t\t}\n\t\tif (vnode.props && vnode.props.__self) {\n\t\t\tself = vnode.props.__self;\n\t\t\tdelete vnode.props.__self;\n\t\t}\n\t\tvnode.__self = self;\n\t\tvnode.__source = source;\n\t\tObject.defineProperties(vnode, deprecatedAttributes);\n\t\tif (oldVnode) oldVnode(vnode);\n\t};\n\n\toptions.diffed = vnode => {\n\t\t// Check if the user passed plain objects as children. Note that we cannot\n\t\t// move this check into `options.vnode` because components can receive\n\t\t// children in any shape they want (e.g.\n\t\t// `<MyJSONFormatter>{{ foo: 123, bar: \"abc\" }}</MyJSONFormatter>`).\n\t\t// Putting this check in `options.diffed` ensures that\n\t\t// `vnode._children` is set and that we only validate the children\n\t\t// that were actually rendered.\n\t\tif (vnode._children) {\n\t\t\tvnode._children.forEach(child => {\n\t\t\t\tif (child && child.type === undefined) {\n\t\t\t\t\t// Remove internal vnode keys that will always be patched\n\t\t\t\t\tdelete child._parent;\n\t\t\t\t\tdelete child._depth;\n\t\t\t\t\tconst keys = Object.keys(child).join(',');\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Objects are not valid as a child. Encountered an object with the keys {${keys}}.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/** @type {import('./internal').Component} */\n\t\tconst component = vnode._component;\n\t\tif (component && component.__hooks) {\n\t\t\tlet hooks = component.__hooks;\n\t\t\tif (Array.isArray(hooks._list)) {\n\t\t\t\thooks._list.forEach(hook => {\n\t\t\t\t\tif (hook._factory && (!hook._args || !Array.isArray(hook._args))) {\n\t\t\t\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t`In ${componentName} you are calling useMemo/useCallback without passing arguments.\\n` +\n\t\t\t\t\t\t\t\t`This is a noop since it will not be able to memoize, it will execute it every render.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// After paint effects\n\t\t\tif (Array.isArray(hooks._pendingEffects)) {\n\t\t\t\thooks._pendingEffects.forEach(effect => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Array.isArray(effect._args) &&\n\t\t\t\t\t\twarnedComponents &&\n\t\t\t\t\t\t!warnedComponents.useEffect.has(vnode.type)\n\t\t\t\t\t) {\n\t\t\t\t\t\twarnedComponents.useEffect.set(vnode.type, true);\n\t\t\t\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t'You should provide an array of arguments as the second argument to the \"useEffect\" hook.\\n\\n' +\n\t\t\t\t\t\t\t\t'Not doing so will invoke this effect on every render.\\n\\n' +\n\t\t\t\t\t\t\t\t`This effect can be found in the render of ${componentName}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Layout Effects\n\t\t\tcomponent._renderCallbacks.forEach(possibleEffect => {\n\t\t\t\tif (\n\t\t\t\t\tpossibleEffect._value &&\n\t\t\t\t\t!Array.isArray(possibleEffect._args) &&\n\t\t\t\t\twarnedComponents &&\n\t\t\t\t\t!warnedComponents.useLayoutEffect.has(vnode.type)\n\t\t\t\t) {\n\t\t\t\t\twarnedComponents.useLayoutEffect.set(vnode.type, true);\n\t\t\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t'You should provide an array of arguments as the second argument to the \"useLayoutEffect\" hook.\\n\\n' +\n\t\t\t\t\t\t\t'Not doing so will invoke this effect on every render.\\n\\n' +\n\t\t\t\t\t\t\t`This effect can be found in the render of ${componentName}.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (oldDiffed) oldDiffed(vnode);\n\n\t\tif (vnode._children != null) {\n\t\t\tconst keys = [];\n\t\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\t\tconst child = vnode._children[i];\n\t\t\t\tif (!child || child.key == null) continue;\n\n\t\t\t\tconst key = child.key;\n\t\t\t\tif (keys.indexOf(key) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Following component has two or more children with the ' +\n\t\t\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\n\t\t\t\t\t\t\t'in rendering process. Component: \\n\\n' +\n\t\t\t\t\t\t\tserializeVNode(vnode)\n\t\t\t\t\t);\n\n\t\t\t\t\t// Break early to not spam the console\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\t};\n}\n\nconst setState = Component.prototype.setState;\nComponent.prototype.setState = function(update, callback) {\n\tif (this._vnode == null) {\n\t\tconsole.warn(\n\t\t\t`Calling \"this.setState\" inside the constructor of a component is a ` +\n\t\t\t\t`no-op and might be a bug in your application. Instead, set ` +\n\t\t\t\t`\"this.state = {}\" directly.`\n\t\t);\n\t} else if (this._parentDom == null) {\n\t\tconsole.warn(\n\t\t\t`Can't call \"this.setState\" on an unmounted component. This is a no-op, ` +\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.`\n\t\t);\n\t}\n\n\treturn setState.call(this, update, callback);\n};\n\nconst forceUpdate = Component.prototype.forceUpdate;\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode == null) {\n\t\tconsole.warn(\n\t\t\t`Calling \"this.forceUpdate\" inside the constructor of a component is a ` +\n\t\t\t\t`no-op and might be a bug in your application.`\n\t\t);\n\t} else if (this._parentDom == null) {\n\t\tconsole.warn(\n\t\t\t`Can't call \"this.setState\" on an unmounted component. This is a no-op, ` +\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.`\n\t\t);\n\t}\n\treturn forceUpdate.call(this, callback);\n};\n\n/**\n * Serialize a vnode tree to a string\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function serializeVNode(vnode) {\n\tlet { props } = vnode;\n\tlet name = getDisplayName(vnode);\n\n\tlet attrs = '';\n\tfor (let prop in props) {\n\t\tif (props.hasOwnProperty(prop) && prop !== 'children') {\n\t\t\tlet value = props[prop];\n\n\t\t\t// If it is an object but doesn't have toString(), use Object.toString\n\t\t\tif (typeof value === 'function') {\n\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\n\t\t\t}\n\n\t\t\tvalue =\n\t\t\t\tObject(value) === value && !value.toString\n\t\t\t\t\t? Object.prototype.toString.call(value)\n\t\t\t\t\t: value + '';\n\n\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\n\t\t}\n\t}\n\n\tlet children = props.children;\n\treturn `<${name}${attrs}${\n\t\tchildren && children.length ? '>..</' + name + '>' : ' />'\n\t}`;\n}\n","/* istanbul ignore file */\nimport {\n\tgetData,\n\tgetChildren,\n\tgetInstance,\n\thasDataChanged,\n\tisRoot\n} from './custom';\n\n/**\n * Custom renderer tailored for Preact. It converts updated vnode trees\n * to events the devtools can understand.\n * @class Renderer\n */\nexport class Renderer {\n\tconstructor(hook, rid) {\n\t\t/** @type {string} */\n\t\tthis.rid = rid;\n\t\tthis.hook = hook;\n\n\t\t/** @type {Array<import('../internal').DevtoolsEvent>} */\n\t\tthis.pending = [];\n\n\t\t/**\n\t\t * Store the instance of a vnode. This will be later used to decide if a\n\t\t * vnode needs to be mounted or updated. For components the instance refers\n\t\t * to the actual class instance whereas for dom nodes it refers to the\n\t\t * underlying dom element.\n\t\t * @type {WeakMap<import('../internal').Component | import('../internal').PreactElement | HTMLElement | Text, import('../internal').VNode>}\n\t\t */\n\t\tthis.inst2vnode = new WeakMap();\n\t\tthis.connected = false;\n\t}\n\n\t/**\n\t * Mark the connection status as ready so that we can proceed\n\t * to actually flush events.\n\t */\n\tmarkConnected() {\n\t\tthis.connected = true;\n\t\tthis.flushPendingEvents();\n\t}\n\n\t/**\n\t * Flush all queued events\n\t */\n\tflushPendingEvents() {\n\t\tif (!this.connected) return;\n\n\t\tlet events = this.pending;\n\t\tthis.pending = [];\n\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\tlet event = events[i];\n\t\t\tthis.hook.emit(event.type, event);\n\t\t}\n\t}\n\n\t/**\n\t * Recursively mount a vnode tree. Note that the devtools expects the tree to\n\t * be mounted from the bottom up, otherwise the order will be messed up.\n\t * Therefore we mount children prior to mounting the vnode itself.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\tmount(vnode) {\n\t\tthis.inst2vnode.set(getInstance(vnode), vnode);\n\t\tlet data = getData(vnode);\n\n\t\t/** @type {Array<import('../internal').DevtoolsEvent>} */\n\t\tlet work = [\n\t\t\t{\n\t\t\t\tinternalInstance: vnode,\n\t\t\t\tdata,\n\t\t\t\trenderer: this.rid,\n\t\t\t\ttype: 'mount'\n\t\t\t}\n\t\t];\n\n\t\t// Children must be mounted first\n\t\tif (Array.isArray(data.children)) {\n\t\t\tlet stack = data.children.slice();\n\t\t\tlet item;\n\t\t\twhile ((item = stack.pop()) != null) {\n\t\t\t\tlet children = getChildren(item);\n\t\t\t\tstack.push(...children);\n\n\t\t\t\tthis.inst2vnode.set(getInstance(item), item);\n\n\t\t\t\tlet data = getData(item);\n\n\t\t\t\twork.push({\n\t\t\t\t\tinternalInstance: item,\n\t\t\t\t\tdata,\n\t\t\t\t\trenderer: this.rid,\n\t\t\t\t\ttype: 'mount'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = work.length; --i >= 0; ) {\n\t\t\tthis.pending.push(work[i]);\n\t\t}\n\n\t\t// Special event if we have a root\n\t\tif (isRoot(vnode)) {\n\t\t\tthis.pending.push({\n\t\t\t\tinternalInstance: vnode,\n\t\t\t\tdata,\n\t\t\t\trenderer: this.rid,\n\t\t\t\ttype: 'root'\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Update a vnode tree\n\t * @param {import('../internal').VNode} vnode\n\t */\n\tupdate(vnode) {\n\t\tlet data = getData(vnode);\n\n\t\t// Children must be updated first\n\t\tif (Array.isArray(data.children)) {\n\t\t\tfor (let i = 0; i < data.children.length; i++) {\n\t\t\t\tlet child = data.children[i];\n\t\t\t\tlet inst = getInstance(child);\n\n\t\t\t\tlet prevChild = this.inst2vnode.get(inst);\n\t\t\t\tif (prevChild == null) this.mount(child);\n\t\t\t\telse this.update(child);\n\n\t\t\t\t// Mutate child to keep referential equality intact\n\t\t\t\tdata.children[i] = this.inst2vnode.get(inst);\n\t\t\t}\n\t\t}\n\n\t\tlet prev = this.inst2vnode.get(data.publicInstance);\n\n\t\t// The `updateProfileTimes` event is a faster version of `updated` and\n\t\t// is processed much quicker inside the devtools extension.\n\t\tif (!hasDataChanged(prev, vnode)) {\n\t\t\t// Always assume profiling data has changed. When we skip an event here\n\t\t\t// the devtools element picker will somehow break.\n\t\t\tthis.pending.push({\n\t\t\t\t// This property is only used as an id inside the devtools. The\n\t\t\t\t// relevant data will be read from `.data` instead which is a\n\t\t\t\t// normalized structure that every react release adheres to. This\n\t\t\t\t// makes backwards-compatibility easier instead of relying on internal\n\t\t\t\t// vnode/fiber shape.\n\t\t\t\tinternalInstance: prev,\n\t\t\t\tdata,\n\t\t\t\trenderer: this.rid,\n\t\t\t\ttype: 'updateProfileTimes'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pending.push({\n\t\t\t// This property is only used as an id inside the devtools. The\n\t\t\t// relevant data will be read from `.data` instead which is a\n\t\t\t// normalized structure that every react release adheres to. This\n\t\t\t// makes backwards-compatibility easier instead of relying on internal\n\t\t\t// vnode/fiber shape.\n\t\t\tinternalInstance: prev,\n\t\t\tdata,\n\t\t\trenderer: this.rid,\n\t\t\ttype: 'update'\n\t\t});\n\t}\n\n\t/**\n\t * Pass a rendered tree to the devtools. At this point elements have already\n\t * unmounted, so we don't need to check for removals and only update vs mount\n\t * instead.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\thandleCommitFiberRoot(vnode) {\n\t\tlet inst = getInstance(vnode);\n\n\t\tif (this.inst2vnode.has(inst)) this.update(vnode);\n\t\telse this.mount(vnode);\n\n\t\t// The devtools checks via the existence of this property if the devtools\n\t\t// profiler should be enabled or not. If it is missing from the first root\n\t\t// node the \"Profiler\" tab won't show up.\n\t\t/** @type {import('../internal').VNode} */\n\t\tlet root = null;\n\t\tif (isRoot(vnode)) {\n\t\t\t/** @type {*} */\n\t\t\t(vnode).treeBaseDuration = 0;\n\t\t\troot = vnode;\n\t\t} else {\n\t\t\t// \"rootCommitted\" always needs the actual root node for the profiler\n\t\t\t// to be able to collect timings. The `_parent` property will\n\t\t\t// point to a vnode for a root node.\n\t\t\troot = vnode;\n\t\t\twhile (root._parent != null) {\n\t\t\t\troot = root._parent;\n\t\t\t}\n\t\t}\n\n\t\tthis.pending.push({\n\t\t\tinternalInstance: root,\n\t\t\trenderer: this.rid,\n\t\t\tdata: getData(root),\n\t\t\ttype: 'rootCommitted'\n\t\t});\n\n\t\tthis.flushPendingEvents();\n\t\treturn vnode;\n\t}\n\n\t/**\n\t * Unmount a vnode recursively. Contrary to mounting or updating unmounting needs\n\t * to push the events in parent-first order. Because `options.unmount` is\n\t * already fired in parent-first order we don't need to traverse anything here.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\thandleCommitFiberUnmount(vnode) {\n\t\tlet inst = getInstance(vnode);\n\t\tthis.inst2vnode.delete(inst);\n\n\t\t// Special case when unmounting a root (most prominently caused by webpack's\n\t\t// `hot-module-reloading`). If this happens we need to unmount the virtual\n\t\t// `Fragment` we're wrapping around each root just for the devtools.\n\n\t\tthis.pending.push({\n\t\t\tinternalInstance: vnode,\n\t\t\trenderer: this.rid,\n\t\t\ttype: 'unmount'\n\t\t});\n\t}\n\n\t/**\n\t * Get the dom element by a vnode\n\t * @param {import('../internal').VNode} vnode\n\t * @returns {import('../internal').PreactElement | Text}\n\t */\n\tgetNativeFromReactElement(vnode) {\n\t\treturn vnode._dom;\n\t}\n\n\t/**\n\t * Get a vnode by a dom element\n\t * @param {import('../internal').PreactElement | Text} dom\n\t * @returns {import('../internal').VNode | null}\n\t */\n\tgetReactElementFromNative(dom) {\n\t\treturn this.inst2vnode.get(dom) || null;\n\t}\n\n\t// Unused, but devtools expects it to be there\n\t/* istanbul ignore next */\n\twalkTree() {}\n\n\t// Unused, but devtools expects it to be there\n\t/* istanbul ignore next */\n\tcleanup() {}\n}\n","/**\n * VNode relationships are encoded as simple numbers for the devtools. We use\n * this function to keep track of existing id's and create new ones if needed.\n * @returns {import('./types').IdMapper}\n */\nexport function createIdMapper() {\n\t/** @type {Map<any, number>} */\n\tconst instToId = new Map();\n\n\t/** @type {Map<number, import('../../internal').VNode>} */\n\tconst idToVNode = new Map();\n\n\t/** @type {Map<number, any>} */\n\tconst idToInst = new Map();\n\n\tlet nextId = 1;\n\n\t/** @type {import('./types').IdMapper[\"getVNode\"]} */\n\tconst getVNode = id => idToVNode.get(id) || null;\n\n\t/** @type {import('./types').IdMapper[\"hasId\"]} */\n\tconst hasId = vnode => {\n\t\t/* istanbul ignore next */\n\t\tif (vnode != null) {\n\t\t\treturn instToId.has(getInstance(vnode));\n\t\t}\n\t\t/* istanbul ignore next */\n\t\treturn false;\n\t};\n\n\t/** @type {import('./types').IdMapper[\"getId\"]} */\n\tconst getId = vnode => {\n\t\t/* istanbul ignore next */\n\t\tif (vnode == null) return -1;\n\t\tconst inst = getInstance(vnode);\n\t\treturn /* istanbul ignore next */ instToId.get(inst) || -1;\n\t};\n\n\t/** @type {import('./types').IdMapper[\"update\"]} */\n\tconst update = (id, vnode) => {\n\t\tconst inst = getInstance(vnode);\n\t\tidToInst.set(id, inst);\n\t\tidToVNode.set(id, vnode);\n\t};\n\n\t/** @type {import('./types').IdMapper[\"remove\"]} */\n\tconst remove = vnode => {\n\t\tif (hasId(vnode)) {\n\t\t\tconst id = getId(vnode);\n\t\t\tidToInst.delete(id);\n\t\t\tidToVNode.delete(id);\n\t\t}\n\t\tconst inst = getInstance(vnode);\n\t\tinstToId.delete(inst);\n\t};\n\n\t/** @type {import('./types').IdMapper[\"createId\"]} */\n\tconst createId = vnode => {\n\t\tconst id = nextId++;\n\t\tconst inst = getInstance(vnode);\n\t\tinstToId.set(inst, id);\n\t\tidToInst.set(id, inst);\n\t\tidToVNode.set(id, vnode);\n\t\treturn id;\n\t};\n\n\t/** @type {import('./types').IdMapper[\"has\"]} */\n\tconst has = id => idToInst.has(id);\n\n\treturn { has, update, getVNode, hasId, createId, getId, remove };\n}\n\n/**\n *\n * @param {import('../../internal').VNode} vnode\n */\nexport function getInstance(vnode) {\n\t// For components we use the instance to check refs, otherwise\n\t// we'll use a dom node\n\tif (typeof vnode.type === 'function') {\n\t\treturn vnode._component;\n\t}\n\n\treturn vnode._dom;\n}\n","/**\n * The string table holds a mapping of strings to ids. This saves a lot of space\n * in messaging because we can only need to declare a string once and can later\n * refer to its id. This is especially true for component or element names which\n * expectedoccur multiple times.\n */\n\n/**\n * Convert a string to an id. Works similar to a gzip dictionary.\n * @param {import('./types').StringTable} table\n * @param {string} input\n * @returns {number}\n */\nexport function getStringId(table, input) {\n\tif (!table.has(input)) {\n\t\ttable.set('' + input, table.size + 1);\n\t}\n\n\treturn table.get(input);\n}\n\n/**\n * Convert string table to something the extension understands\n * @param {import('./types').StringTable} table\n * @returns {number[]}\n */\nexport function flushTable(table) {\n\tlet ops = [0];\n\n\ttable.forEach((_, k) => {\n\t\tops[0] += k.length + 1;\n\t\tops.push(k.length, ...encode(k));\n\t});\n\n\treturn ops;\n}\n\n/**\n * Parse message to strings\n * @param {number[]} data\n */\nexport function parseTable(data) {\n\tconst len = data[0];\n\tconst strings = [];\n\tif (len > 0) {\n\t\tfor (let i = 1; i < len; i++) {\n\t\t\tconst strLen = data[i];\n\t\t\tlet start = i + 1;\n\t\t\tconst end = i + strLen + 1;\n\t\t\tlet str = '';\n\t\t\tfor (; start < end; start++) {\n\t\t\t\tstr += String.fromCodePoint(data[start]);\n\t\t\t}\n\t\t\tstrings.push(str);\n\t\t\ti += strLen;\n\t\t}\n\t}\n\n\treturn strings;\n}\n\n// TODO: Use a proper LRU cache?\n/** @type {Map<string, number[]>} */\nconst encoded = new Map();\n\n/** @type {(s: string) => number} */\nconst toCodePoint = s => s.codePointAt(0);\n\n/**\n * Convert a string to an array of codepoints\n * @param {string} input\n * @returns {number[]}\n */\nexport function encode(input) {\n\tif (!encoded.has(input)) {\n\t\tencoded.set(input, input.split('').map(toCodePoint));\n\t}\n\treturn encoded.get(input);\n}\n","import { Fragment } from 'preact';\n\n/**\n * Check if a `vnode` is the root of a tree\n * @param {import('../../internal').VNode} vnode\n * @returns {boolean}\n */\nexport function isRoot(vnode) {\n\treturn vnode._parent == null && vnode.type === Fragment;\n}\n\n/**\n * Check if a `vnode` represents a `Suspense` component\n * @param {import('../../internal').VNode} vnode\n * @returns {boolean}\n */\nexport function isSuspenseVNode(vnode) {\n\tconst c = vnode._component;\n\treturn c != null && c._suspensions != null;\n}\n\n/**\n * Check if a `vnode` represents a context `Consumer` component\n * @param {import('../../internal').VNode} vnode\n * @returns {boolean}\n */\nexport function isConsumerVNode(vnode) {\n\treturn getDisplayName(vnode) === 'Consumer';\n}\n\n/**\n * Get the internal hooks state of a component\n * @param {import('../../internal').Component} c\n */\n/* istanbul ignore next */\nexport function getComponentHooks(c) {\n\treturn c.__hooks || null;\n}\n\n/**\n * Get the diffed children of a `vnode`\n * @param {import('../../internal').VNode} vnode\n * @returns {Array<import('../../internal').VNode | null | undefined>}\n */\nexport function getActualChildren(vnode) {\n\treturn vnode._children || [];\n}\n\n// End Mangle accessors\n\n/**\n * Get the root of a `vnode`\n * @param {import('../../internal').VNode} vnode\n * @returns {import('../../internal').VNode}\n */\nexport function findRoot(vnode) {\n\tlet next = vnode;\n\twhile ((next = next._parent) != null) {\n\t\t/* istanbul ignore else */\n\t\tif (isRoot(next)) {\n\t\t\treturn next;\n\t\t}\n\t}\n\n\t/* istanbul ignore next */\n\treturn vnode;\n}\n\n/**\n * Get the ancestor component that rendered the current vnode\n * @param {import('../../internal').VNode} vnode\n */\nexport function getAncestor(vnode) {\n\tlet next = vnode;\n\twhile ((next = next._parent) != null) {\n\t\treturn next;\n\t}\n\n\t/* istanbul ignore next */\n\treturn null;\n}\n\n/**\n * Get human readable name of the component/dom element\n * @param {import('../../internal').VNode} vnode\n * @returns {string}\n */\n/* istanbul ignore next*/\nexport function getDisplayName(vnode) {\n\tif (vnode.type === Fragment) return 'Fragment';\n\telse if (typeof vnode.type === 'function')\n\t\treturn vnode.type.displayName || vnode.type.name;\n\telse if (typeof vnode.type === 'string') return vnode.type;\n\treturn '#text';\n}\n","import { Fragment } from 'preact';\nimport { getDisplayName } from './vnode';\n\n/**\n *\n * @param {import('../../internal').VNode} vnode\n * @param {import('./types').FilterState} filters\n * @returns {boolean}\n */\nexport function shouldFilter(vnode, filters) {\n\t// Filter text nodes by default. They are too tricky to match\n\t// with the previous one...\n\tif (vnode.type == null) return true;\n\n\tif (typeof vnode.type === 'function') {\n\t\tif (vnode.type === Fragment && filters.type.has('fragment')) {\n\t\t\tconst parent = vnode._parent;\n\t\t\t// Only filter non-root nodes\n\t\t\tif (parent != null) return true;\n\n\t\t\treturn false;\n\t\t}\n\t} else if (filters.type.has('dom')) {\n\t\treturn true;\n\t}\n\n\tif (filters.regex.length > 0) {\n\t\tconst name = getDisplayName(vnode);\n\t\treturn filters.regex.some(r => r.test(name));\n\t}\n\n\treturn false;\n}\n","import { getActualChildren } from './vnode';\n\n/**\n *\n * @param {import('../../internal').VNode} vnode\n * @param {(vnode: import('../../internal').VNode) => void} fn\n */\nexport function traverse(vnode, fn) {\n\tfn(vnode);\n\tconst children = getActualChildren(vnode);\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = /** @type {*} */ (children[i]);\n\t\t/* istanbul ignore else */\n\t\tif (child != null) {\n\t\t\tfn(child);\n\t\t}\n\t}\n}\n\n/**\n *\n * @param {*} data\n * @param {(x: any) => import('./types').SerializedVNode | null} getVNode\n * @param {Set<any>} [seen]\n */\nexport function jsonify(data, getVNode, seen = new Set()) {\n\tif (seen.has(data)) return '...';\n\n\tconst vnode = getVNode(data);\n\tif (vnode != null) return vnode;\n\n\tif (Array.isArray(data)) {\n\t\treturn data.map(x => jsonify(x, getVNode, seen));\n\t}\n\tswitch (typeof data) {\n\t\tcase 'string':\n\t\t\treturn data.length > 300 ? data.slice(300) : data;\n\t\tcase 'function': {\n\t\t\treturn {\n\t\t\t\ttype: 'function',\n\t\t\t\tname:\n\t\t\t\t\t/* istanbul ignore next */ data.displayName ||\n\t\t\t\t\tdata.name ||\n\t\t\t\t\t'anonymous'\n\t\t\t};\n\t\t}\n\t\tcase 'object': {\n\t\t\tif (data === null) return null;\n\t\t\tseen.add(data);\n\t\t\tconst out = { ...data };\n\t\t\tObject.keys(out).forEach(key => {\n\t\t\t\tout[key] = jsonify(out[key], getVNode, seen);\n\t\t\t});\n\t\t\treturn out;\n\t\t}\n\t\tdefault:\n\t\t\treturn data;\n\t}\n}\n\nexport function cleanProps(props) {\n\t/* istanbul ignore next */\n\tif (typeof props === 'string' || !props) return null;\n\tconst out = { ...props };\n\tif (!Object.keys(out).length) return null;\n\treturn out;\n}\n\nlet reg = /__cC\\d+/;\n\n/**\n *\n * @param {Record<string, any>} context\n */\nexport function cleanContext(context) {\n\tlet res = {};\n\tfor (let key in context) {\n\t\tif (reg.test(key)) continue;\n\t\tres[key] = context[key];\n\t}\n\n\tif (Object.keys(res).length == 0) return null;\n\treturn res;\n}\n\n/**\n * Deeply mutate a property by walking down an array of property keys\n * @param {Record<string, any>} obj\n * @param {Array<number | string>} path\n * @param {*} value\n */\nexport function setIn(obj, path, value) {\n\tlet last = path.pop();\n\t/* istanbul ignore next */\n\tlet parent = path.reduce((acc, attr) => (acc ? acc[attr] : null), obj);\n\t/* istanbul ignore else */\n\tif (parent && last) {\n\t\tparent[last] = value;\n\t}\n}\n","// Element types\nexport const HTML_ELEMENT = 1;\nexport const CLASS_COMPONENT = 2;\nexport const FUNCTION_COMPONENT = 3;\nexport const FORWARD_REF = 4;\nexport const MEMO = 5;\nexport const SUSPENSE = 6;\n\n// Devtools Event Messages\nexport const ADD_ROOT = 1;\nexport const ADD_VNODE = 2;\nexport const REMOVE_VNODE = 3;\nexport const UPDATE_VNODE_TIMINGS = 4;\nexport const REORDER_CHILDREN = 5;\n","import { Fragment } from 'preact';\nimport { createIdMapper } from './IdMapper';\nimport { getStringId, flushTable } from './string-table';\nimport {\n\tisRoot,\n\tfindRoot,\n\tgetAncestor,\n\tisSuspenseVNode,\n\tgetDisplayName,\n\tgetComponentHooks,\n\tgetActualChildren,\n\tisConsumerVNode\n} from './vnode';\nimport { shouldFilter } from './filter';\nimport { cleanContext, jsonify, cleanProps, traverse, setIn } from './utils';\nimport {\n\tMEMO,\n\tFORWARD_REF,\n\tSUSPENSE,\n\tCLASS_COMPONENT,\n\tFUNCTION_COMPONENT,\n\tHTML_ELEMENT,\n\tREMOVE_VNODE,\n\tADD_ROOT,\n\tADD_VNODE,\n\tUPDATE_VNODE_TIMINGS,\n\tREORDER_CHILDREN\n} from './constants';\n\nlet memoReg = /^Memo\\(/;\nlet forwardRefReg = /^ForwardRef\\(/;\n\n/**\n * Get the type of a vnode. The devtools uses these constants to differentiate\n * between the various forms of components.\n *\n * @param {import('../../internal').VNode} vnode\n * @returns {number}\n */\nexport function getDevtoolsType(vnode) {\n\tif (typeof vnode.type == 'function' && vnode.type !== Fragment) {\n\t\tconst name = getDisplayName(vnode);\n\t\tif (memoReg.test(name)) return MEMO;\n\t\tif (forwardRefReg.test(name)) return FORWARD_REF;\n\t\tif (isSuspenseVNode(vnode)) return SUSPENSE;\n\n\t\t// TODO: Provider and Consumer\n\t\treturn vnode.type.prototype && vnode.type.prototype.render\n\t\t\t? CLASS_COMPONENT\n\t\t\t: FUNCTION_COMPONENT;\n\t}\n\treturn HTML_ELEMENT;\n}\n\n/**\n * Check if a variable is a `vnode`\n * @param {*} x\n * @returns {boolean}\n */\nexport function isVNode(x) {\n\treturn x != null && x.type !== undefined && x._dom !== undefined;\n}\n\n/**\n * Serialize a vnode\n * @param {*} x\n * @returns {import('./types').SerializedVNode |null}\n */\nexport function serializeVNode(x) {\n\tif (isVNode(x)) {\n\t\treturn {\n\t\t\ttype: 'vnode',\n\t\t\tname: getDisplayName(x)\n\t\t};\n\t}\n\n\treturn null;\n}\n\n/**\n * Collect all relevant data from a commit and convert it to a message\n * the detools can understand\n * @param {import('./types').Commit} commit\n */\nexport function flush(commit) {\n\tconst { rootId, unmountIds, operations, strings } = commit;\n\n\tlet msg = [rootId, ...flushTable(strings)];\n\tif (unmountIds.length > 0) {\n\t\tmsg.push(REMOVE_VNODE, unmountIds.length, ...unmountIds);\n\t}\n\tmsg.push(...operations);\n\n\treturn { name: 'operation', data: msg };\n}\n\n/** @type {import('./types').FilterState} */\nlet defaultFilters = {\n\tregex: [],\n\ttype: new Set(['dom', 'fragment'])\n};\n\n/**\n * The renderer is responsible for translating anything preact rendered\n * into a serializable format that is passed to the devtools extension.\n * On top of that the devtools can call the renderer to request certain\n * information about `vnodes`. This is usually done lazily, so that we\n * don't waste any precious CPU time.\n *\n * Instead of passing `json` objects around, we're converting everythign\n * to a custom format that is representable using a number array. It's one\n * of the major performance improvements the react team made in their devtools\n * v4 code.\n *\n * The translation process always happens after a commit has finished.\n * This has the advantage of not tainting measured timings for rendering\n * `vnodes`. But it has the disadvantage that we need to reconstruct what\n * changes were done in each commit. Nonetheless I do think the additional\n * complexity is worth it, given the better and less confusing user experience.\n *\n * @param {import('./types').PreactDevtoolsHook} hook\n * @param {import('./types').FilterState} filters\n * @returns {import('./types').Renderer}\n */\nexport function createRenderer(hook, filters = defaultFilters) {\n\tconst ids = createIdMapper();\n\n\t/** @type {Set<import('../../internal').VNode>} */\n\tconst roots = new Set();\n\n\t/**\n\t * Queue events until the extension is connected\n\t * @type {import('./types').DevtoolsEvent[]}\n\t */\n\tlet queue = [];\n\n\t/** @type {number[]} */\n\tlet currentUnmounts = [];\n\n\t/** @type {WeakMap<HTMLElement | Text, import('../../internal').VNode>} */\n\tlet domToVNode = new WeakMap();\n\treturn {\n\t\tgetVNodeById: id => ids.getVNode(id),\n\t\thas: id => ids.has(id),\n\t\tgetDisplayName,\n\t\tforceUpdate: id => {\n\t\t\tconst vnode = ids.getVNode(id);\n\t\t\tif (vnode) {\n\t\t\t\tconst c = vnode._component;\n\t\t\t\tif (c) c.forceUpdate();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Print out a `vnode` to the native devtools console. Called when\n\t\t * the bug icon is pressed in the devtools sidebar panel.\n\t\t * @param {number} id\n\t\t * @param {number[]} children\n\t\t */\n\t\t/* istanbul ignore next */\n\t\tlog(id, children) {\n\t\t\tconst vnode = ids.getVNode(id);\n\t\t\tif (vnode == null) {\n\t\t\t\tconsole.warn(`Could not find vnode with id ${id}`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlogVNode(vnode, id, children);\n\t\t},\n\n\t\t/**\n\t\t * Retrieve all `vnode` details like `props`, `state` and `context`\n\t\t * to be displayed in the sidebar. We only request this information\n\t\t * when a `vnode` is selected in the devtools extension.\n\t\t * @param {number} id\n\t\t * @returns {import('./types').InspectData | null}\n\t\t */\n\t\tinspect(id) {\n\t\t\tconst vnode = ids.getVNode(id);\n\t\t\tif (!vnode) return null;\n\n\t\t\tconst c = vnode._component;\n\t\t\tconst hasState =\n\t\t\t\ttypeof vnode.type === 'function' &&\n\t\t\t\tc != null &&\n\t\t\t\tObject.keys(c.state).length > 0;\n\n\t\t\tconst hasHooks = c != null && getComponentHooks(c) != null;\n\t\t\tlet context = null;\n\t\t\tif (c != null) {\n\t\t\t\tcontext = isConsumerVNode(vnode)\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tvalue: c.context\n\t\t\t\t\t  }\n\t\t\t\t\t: cleanContext(c.context);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcontext: context != null ? jsonify(context, serializeVNode) : null,\n\t\t\t\tcanEditHooks: hasHooks,\n\t\t\t\thooks: null,\n\t\t\t\tid,\n\t\t\t\tname: getDisplayName(vnode),\n\t\t\t\tcanEditProps: true,\n\t\t\t\tprops: jsonify(cleanProps(vnode.props), serializeVNode),\n\t\t\t\tcanEditState: true,\n\t\t\t\tstate: hasState ? jsonify(c.state, serializeVNode) : null,\n\t\t\t\ttype: getDevtoolsType(vnode)\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Get the DOM nodes associated with a `vnode`. For `Fragments` this can be\n\t\t * a range of nodes (experimental).\n\t\t * @param {number} id\n\t\t * @returns {[HTMLElement | Text | null, HTMLElement | Text | null] | null}\n\t\t */\n\t\tfindDomForVNode(id) {\n\t\t\tconst vnode = ids.getVNode(id);\n\t\t\treturn vnode ? [vnode._dom, vnode._lastDomChild] : null;\n\t\t},\n\n\t\t/**\n\t\t * Get the `id` associated with a `vnode`.\n\t\t * @param {HTMLElement | Text} node\n\t\t * @returns {number | null}\n\t\t */\n\t\tfindVNodeIdForDom(node) {\n\t\t\tconst vnode = domToVNode.get(node);\n\t\t\tif (vnode) {\n\t\t\t\tif (shouldFilter(vnode, filters)) {\n\t\t\t\t\tlet p = vnode;\n\t\t\t\t\twhile ((p = p._parent) != null) {\n\t\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\t\tif (!shouldFilter(p, filters)) break;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ids.getId(p);\n\t\t\t\t}\n\n\t\t\t\treturn ids.getId(vnode);\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t},\n\n\t\t/**\n\t\t * Called when the user changes filtering in the extension.\n\t\t * @param {import('./types').FilterState} nextFilters\n\t\t */\n\t\tapplyFilters(nextFilters) {\n\t\t\troots.forEach(root => {\n\t\t\t\tconst children = getActualChildren(root);\n\t\t\t\t/* istanbul ignore else */\n\t\t\t\tif (children.length > 0 && children[0] != null) {\n\t\t\t\t\ttraverse(/** @type{*} */ (children[0]), vnode =>\n\t\t\t\t\t\tthis.onUnmount(vnode)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t/** @type {import('./types').Commit} */\n\t\t\t\tconst commit = {\n\t\t\t\t\toperations: [],\n\t\t\t\t\trootId: ids.getId(root),\n\t\t\t\t\tstrings: new Map(),\n\t\t\t\t\tunmountIds: currentUnmounts\n\t\t\t\t};\n\n\t\t\t\tconst unmounts = flush(commit);\n\t\t\t\tcurrentUnmounts = [];\n\t\t\t\tqueue.push(unmounts);\n\t\t\t});\n\n\t\t\tfilters.regex = nextFilters.regex;\n\t\t\tfilters.type = nextFilters.type;\n\n\t\t\troots.forEach(root => {\n\t\t\t\tconst commit = createCommit(ids, roots, root, filters, domToVNode);\n\t\t\t\tconst ev = flush(commit);\n\t\t\t\tqueue.push(ev);\n\t\t\t});\n\n\t\t\t/* istanbul ignore else */\n\t\t\tif (hook.connected) {\n\t\t\t\tthis.flushInitial();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Flush all events that may have been queued before the devtools are\n\t\t * done initializing.\n\t\t */\n\t\tflushInitial() {\n\t\t\tqueue.forEach(ev => hook.emit(ev.name, ev.data));\n\t\t\thook.connected = true;\n\t\t\tqueue = [];\n\t\t},\n\n\t\t/**\n\t\t * Main entry function that's called whenever a commit completed. From here\n\t\t * on we walk the view tree and store any changes in an operations array\n\t\t * that the devtools can understand. If we're connected to the extension\n\t\t * we message the events, and if not we'll queue them until the extension\n\t\t * becomes active.\n\t\t * @param {import('../../internal').VNode} vnode\n\t\t */\n\t\tonCommit(vnode) {\n\t\t\tconst commit = createCommit(ids, roots, vnode, filters, domToVNode);\n\t\t\tcommit.unmountIds.push(...currentUnmounts);\n\t\t\tcurrentUnmounts = [];\n\t\t\tconst ev = flush(commit);\n\n\t\t\t/* istanbul ignore else */\n\t\t\tif (hook.connected) {\n\t\t\t\thook.emit(ev.name, ev.data);\n\t\t\t} else {\n\t\t\t\tqueue.push(ev);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Called when a `vnode` is removed.\n\t\t * @param {import('../../internal').VNode} vnode\n\t\t */\n\t\tonUnmount(vnode) {\n\t\t\tif (!shouldFilter(vnode, filters)) {\n\t\t\t\t/* istanbul ignore else */\n\t\t\t\tif (ids.hasId(vnode)) {\n\t\t\t\t\tcurrentUnmounts.push(ids.getId(vnode));\n\t\t\t\t}\n\t\t\t} else if (typeof vnode.type !== 'function') {\n\t\t\t\tconst dom = vnode._dom;\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (dom != null) domToVNode.delete(dom);\n\t\t\t}\n\n\t\t\tids.remove(vnode);\n\t\t},\n\n\t\t/**\n\t\t * Apply an update that was triggered in the extension. That's usually\n\t\t * done via any of the input elements in the sidebar.\n\t\t * @param {number} id\n\t\t * @param {'props' | 'state' | 'context' | 'hooks'} type\n\t\t * @param {Array<string, number>} path\n\t\t * @param {any} value\n\t\t */\n\t\tupdate(id, type, path, value) {\n\t\t\tconst vnode = ids.getVNode(id);\n\t\t\tif (vnode !== null) {\n\t\t\t\tif (typeof vnode.type === 'function') {\n\t\t\t\t\tconst c = vnode._component;\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif (type === 'props') {\n\t\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\t\tsetIn(vnode.props || {}, path.slice(), value);\n\t\t\t\t\t} else if (type === 'state') {\n\t\t\t\t\t\tsetIn(c.state || {}, path.slice(), value);\n\t\t\t\t\t} else if (type === 'context') {\n\t\t\t\t\t\tsetIn(c.context || {}, path.slice(), value);\n\t\t\t\t\t}\n\n\t\t\t\t\tc.forceUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Print an element to console\n * @param {import('../../internal').VNode} vnode\n * @param {number} id\n * @param {number[]} children\n */\n/* istanbul ignore next */\nexport function logVNode(vnode, id, children) {\n\tconst display = getDisplayName(vnode);\n\tconst name = display === '#text' ? display : `<${display || 'Component'} />`;\n\n\t/* eslint-disable no-console */\n\tconsole.group(`LOG %c${name}`, 'color: #ea88fd; font-weight: normal');\n\tconsole.log('props:', vnode.props);\n\tconst c = vnode._component;\n\tif (c != null) {\n\t\tconsole.log('state:', c.state);\n\t}\n\tconsole.log('vnode:', vnode);\n\tconsole.log('devtools id:', id);\n\tconsole.log('devtools children:', children);\n\tconsole.groupEnd();\n\t/* eslint-enable no-console */\n}\n\n/**\n * Walk a `vnode` tree and compare it with the previous one. If any\n * changes are detected they will be stored in the return value.\n * @param {import('./types').IdMapper} ids\n * @param {Set<import('../../internal').VNode>} roots\n * @param {import('../../internal').VNode} vnode\n * @param {import('./types').FilterState} filters\n * @param {WeakMap<HTMLElement | Text, import('../../internal').VNode>} filters\n * @returns {import('./types').Commit}\n */\nexport function createCommit(ids, roots, vnode, filters, domCache) {\n\tconst commit = {\n\t\toperations: [],\n\t\trootId: -1,\n\t\tstrings: new Map(),\n\t\tunmountIds: []\n\t};\n\n\tlet parentId = -1;\n\n\tconst isNew = !ids.hasId(vnode);\n\n\tif (isRoot(vnode)) {\n\t\tconst rootId = !isNew ? ids.getId(vnode) : ids.createId(vnode);\n\t\tparentId = commit.rootId = rootId;\n\t\troots.add(vnode);\n\t} else {\n\t\tconst root = findRoot(vnode);\n\t\tcommit.rootId = ids.getId(root);\n\t\tparentId = ids.getId(getAncestor(vnode));\n\t}\n\n\tif (isNew) {\n\t\tmount(ids, commit, vnode, parentId, filters, domCache);\n\t} else {\n\t\tupdate(ids, commit, vnode, parentId, filters, domCache);\n\t}\n\n\treturn commit;\n}\n\n/**\n * Mount a `vnode`\n * @param {import('./types').IdMapper} ids\n * @param {import('./types').Commit} commit\n * @param {import('../../internal').VNode} vnode\n * @param {number} ancestorId\n * @param {import('./types').FilterState} filters\n * @param {WeakMap<HTMLElement | Text, import('../../internal').VNode>} filters\n */\nexport function mount(ids, commit, vnode, ancestorId, filters, domCache) {\n\tconst root = isRoot(vnode);\n\n\tconst skip = shouldFilter(vnode, filters);\n\tif (root || !skip) {\n\t\tconst id = ids.hasId(vnode) ? ids.getId(vnode) : ids.createId(vnode);\n\t\tif (isRoot(vnode)) {\n\t\t\tcommit.operations.push(ADD_ROOT, id);\n\t\t}\n\n\t\tcommit.operations.push(\n\t\t\tADD_VNODE,\n\t\t\tid,\n\t\t\tgetDevtoolsType(vnode), // Type\n\t\t\tancestorId,\n\t\t\t9999, // owner\n\t\t\tgetStringId(commit.strings, getDisplayName(vnode)),\n\t\t\tvnode.key ? getStringId(commit.strings, vnode.key) : 0\n\t\t);\n\t\tancestorId = id;\n\t}\n\n\tif (typeof vnode.type !== 'function') {\n\t\tconst dom = vnode._dom;\n\t\t// TODO: Find a test case\n\t\t/* istanbul ignore next */\n\t\tif (dom) domCache.set(dom, vnode);\n\t}\n\n\tconst children = getActualChildren(vnode);\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = /** @type {*} */ (children[i]);\n\t\tif (child != null) {\n\t\t\tmount(ids, commit, child, ancestorId, filters, domCache);\n\t\t}\n\t}\n}\n\n/**\n * Mark parent vnode for recalculation of children\n * @param {import('./types').IdMapper} ids\n * @param {import('./types').Commit} commit\n * @param {import('../../internal').VNode} vnode\n * @param {number} ancestorId\n * @param {import('./types').FilterState} filters\n * @param {WeakMap<HTMLElement | Text, import('../../internal').VNode>} filters\n */\nexport function update(ids, commit, vnode, ancestorId, filters, domCache) {\n\tconst skip = shouldFilter(vnode, filters);\n\tif (skip) {\n\t\tconst children = getActualChildren(vnode);\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst child = /** @type {*} */ (children[i]);\n\t\t\tif (child != null) {\n\t\t\t\tupdate(ids, commit, child, ancestorId, filters, domCache);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tif (!ids.hasId(vnode)) {\n\t\tmount(ids, commit, vnode, ancestorId, filters, domCache);\n\t\treturn true;\n\t}\n\n\tconst id = ids.getId(vnode);\n\tcommit.operations.push(\n\t\tUPDATE_VNODE_TIMINGS,\n\t\tid,\n\t\tvnode.endTime - vnode.startTime\n\t);\n\n\tids.update(id, vnode);\n\tlet shouldReorder = false;\n\n\tconst children = getActualChildren(vnode);\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = /** @type {*} */ (children[i]);\n\t\tif (child == null) {\n\t\t} else if (ids.hasId(child) || shouldFilter(child, filters)) {\n\t\t\tupdate(ids, commit, child, id, filters, domCache);\n\t\t\t// TODO: This is only sometimes necessary\n\t\t\tshouldReorder = true;\n\t\t} else {\n\t\t\tmount(ids, commit, child, id, filters, domCache);\n\t\t\tshouldReorder = true;\n\t\t}\n\t}\n\n\tif (shouldReorder) {\n\t\tresetChildren(commit, ids, id, vnode, filters);\n\t}\n}\n\n/**\n * Mark parent vnode for recalculation of children\n * @param {import('./types').Commit} commit\n * @param {import('./types').IdMapper} ids\n * @param {number} id\n * @param {import('../../internal').VNode} vnode\n * @param {import('./types').FilterState} filters\n */\nexport function resetChildren(commit, ids, id, vnode, filters) {\n\tlet next = getFilteredChildren(vnode, filters);\n\tif (next.length < 2) return;\n\n\tcommit.operations.push(\n\t\tREORDER_CHILDREN,\n\t\tid,\n\t\tnext.length,\n\t\t...next.map(x => ids.getId(x))\n\t);\n}\n\n/**\n * Traverse over children that are filtered away\n * @param {import('../../internal').VNode} vnode\n * @param {import('./types').FilterState} filters\n * @returns {import('../../internal').VNode[]}\n */\nexport function getFilteredChildren(vnode, filters) {\n\tconst children = getActualChildren(vnode);\n\tconst stack = children.slice();\n\n\t/** @type {import('../../internal').VNode[]} */\n\tconst out = [];\n\n\t/** @type {import('../../internal').VNode<any>} */\n\tlet child;\n\twhile (stack.length) {\n\t\tchild = /** @type {*} */ (stack.pop());\n\t\tif (child != null) {\n\t\t\tif (!shouldFilter(child, filters)) {\n\t\t\t\tout.push(child);\n\t\t\t} else {\n\t\t\t\tconst nextChildren = getActualChildren(child);\n\t\t\t\tif (nextChildren.length > 0) {\n\t\t\t\t\tstack.push(...nextChildren.slice());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn out.reverse();\n}\n","/* istanbul ignore file */\nimport { options, Component, Fragment } from 'preact';\nimport { Renderer } from './renderer';\nimport { setupOptions } from './10/options';\nimport { createRenderer } from './10/renderer';\n\n/**\n * Wrap function with generic error logging\n *\n * @param {*} fn\n * @returns\n */\nfunction catchErrors(fn) {\n\treturn function(...args) {\n\t\ttry {\n\t\t\treturn fn(...args);\n\t\t} catch (e) {\n\t\t\t/* istanbul ignore next */\n\t\t\tconsole.error('The react devtools encountered an error');\n\t\t\t/* istanbul ignore next */\n\t\t\tconsole.error(e); // eslint-disable-line no-console\n\t\t}\n\t};\n}\n\n/* istanbul ignore next */\nlet noop = () => undefined;\n\nexport function initDevTools() {\n\t// This global variable is injected by the devtools\n\tlet preactHook = /** @type {*} */ (window).__PREACT_DEVTOOLS__;\n\n\t// Check for Preact devtools first :)\n\tif (preactHook) {\n\t\tconst renderer = createRenderer(preactHook);\n\t\tsetupOptions(/** @type {*} */ (options), renderer);\n\t\tpreactHook.attach(renderer);\n\t\treturn;\n\t}\n\n\t/** @type {import('../internal').DevtoolsWindow} */\n\tlet hook = (window).__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\tif (hook == null) return;\n\n\t/** @type {(vnode: import('../internal').VNode) => void} */\n\tlet onCommitRoot = noop;\n\n\t/** @type {(vnode: import('../internal').VNode) => void} */\n\tlet onCommitUnmount = noop;\n\n\t// Initialize our custom renderer\n\tlet rid = Math.random()\n\t\t.toString(16)\n\t\t.slice(2);\n\tlet preactRenderer = new Renderer(hook, rid);\n\n\tcatchErrors(() => {\n\t\tlet isDev = false;\n\t\ttry {\n\t\t\tisDev = process.env.NODE_ENV !== 'production';\n\t\t} catch (e) {}\n\n\t\t// Tell devtools which bundle type we run in\n\t\twindow.parent.postMessage(\n\t\t\t{\n\t\t\t\tsource: 'react-devtools-detector',\n\t\t\t\treactBuildType: /* istanbul ignore next */ isDev\n\t\t\t\t\t? 'development'\n\t\t\t\t\t: 'production'\n\t\t\t},\n\t\t\t'*'\n\t\t);\n\n\t\tlet renderer = {\n\t\t\tbundleType: /* istanbul ignore next */ isDev ? 1 : 0,\n\t\t\tversion: '16.5.2',\n\t\t\trendererPackageName: 'preact',\n\t\t\t// We don't need this, but the devtools `attachRenderer` function relies on\n\t\t\t// it being there.\n\t\t\tfindHostInstanceByFiber(vnode) {\n\t\t\t\treturn vnode._dom;\n\t\t\t},\n\t\t\t// We don't need this, but the devtools `attachRenderer` function relies on\n\t\t\t// it being there.\n\t\t\tfindFiberByHostInstance(instance) {\n\t\t\t\treturn preactRenderer.inst2vnode.get(instance) || null;\n\t\t\t}\n\t\t};\n\n\t\tif (!hook._renderers) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.info(\n\t\t\t\t'Preact is not compatible with your version of react-devtools. We ' +\n\t\t\t\t\t'will address this in future releases.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\thook._renderers[rid] = renderer;\n\n\t\t// We can't bring our own `attachRenderer` function therefore we simply\n\t\t// prevent the devtools from overwriting our custom renderer by creating\n\t\t// a noop setter.\n\t\tObject.defineProperty(hook.helpers, rid, {\n\t\t\tget: () => preactRenderer,\n\t\t\tset: () => {\n\t\t\t\tif (!preactRenderer.connected) {\n\t\t\t\t\thelpers.markConnected();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tlet helpers = hook.helpers[rid];\n\n\t\t// Tell the devtools that we are ready to start\n\t\thook.emit('renderer-attached', {\n\t\t\tid: rid,\n\t\t\trenderer,\n\t\t\thelpers\n\t\t});\n\n\t\tonCommitRoot = catchErrors(root => {\n\t\t\t// Empty root\n\t\t\tif (root.type === Fragment && root._children.length == 0) return;\n\n\t\t\tlet roots = hook.getFiberRoots(rid);\n\t\t\troot = helpers.handleCommitFiberRoot(root);\n\t\t\tif (!roots.has(root)) roots.add(root);\n\t\t});\n\n\t\tonCommitUnmount = catchErrors(vnode => {\n\t\t\thook.onCommitFiberUnmount(rid, vnode);\n\t\t});\n\t})();\n\n\t// Store (possible) previous hooks so that we don't overwrite them\n\tlet prevVNodeHook = options.vnode;\n\tlet prevCommitRoot = options._commit;\n\tlet prevBeforeUnmount = options.unmount;\n\tlet prevBeforeDiff = options._diff;\n\tlet prevAfterDiff = options.diffed;\n\n\toptions.vnode = vnode => {\n\t\t// Tiny performance improvement by initializing fields as doubles\n\t\t// from the start. `performance.now()` will always return a double.\n\t\t// See https://github.com/facebook/react/issues/14365\n\t\t// and https://slidr.io/bmeurer/javascript-engine-fundamentals-the-good-the-bad-and-the-ugly\n\t\tvnode.startTime = NaN;\n\t\tvnode.endTime = NaN;\n\n\t\tvnode.startTime = 0;\n\t\tvnode.endTime = -1;\n\t\tif (prevVNodeHook) prevVNodeHook(vnode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tvnode.startTime = now();\n\t\tif (prevBeforeDiff != null) prevBeforeDiff(vnode);\n\t};\n\n\toptions.diffed = vnode => {\n\t\tvnode.endTime = now();\n\t\tif (prevAfterDiff != null) prevAfterDiff(vnode);\n\t};\n\n\toptions._commit = catchErrors((vnode, commitQueue) => {\n\t\t// Call previously defined hook\n\t\tif (prevCommitRoot != null) prevCommitRoot(vnode, commitQueue);\n\n\t\t// These cases are already handled by `unmount`\n\t\tif (vnode == null) return;\n\t\tonCommitRoot(vnode);\n\t});\n\n\toptions.unmount = catchErrors(vnode => {\n\t\t// Call previously defined hook\n\t\tif (prevBeforeUnmount != null) prevBeforeUnmount(vnode);\n\t\tonCommitUnmount(vnode);\n\t});\n\n\t// Inject tracking into setState\n\tconst setState = Component.prototype.setState;\n\tComponent.prototype.setState = function(update, callback) {\n\t\t// Duplicated in setState() but doesn't matter due to the guard.\n\t\tlet s =\n\t\t\t(this._nextState !== this.state && this._nextState) ||\n\t\t\t(this._nextState = Object.assign({}, this.state));\n\n\t\t// Needed in order to check if state has changed after the tree has been committed:\n\t\tthis._prevState = Object.assign({}, s);\n\n\t\treturn setState.call(this, update, callback);\n\t};\n}\n\n/**\n * Get current timestamp in ms. Used for profiling.\n * @returns {number}\n */\nexport let now = Date.now;\n\ntry {\n\t/* istanbul ignore else */\n\tnow = performance.now.bind(performance);\n} catch (e) {}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { createElement } from 'preact';\nimport { shallowDiffers, assign } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref);\n\t}\n\tForwarded.prototype.isReactComponent = true;\n\tForwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).map(fn);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense(props) {\n\t// we do not call super here to golf some bytes...\n\tthis._suspensions = 0;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._suspensions) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\t\t}\n\t};\n\n\tif (!c._suspensions++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Component, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isClient = typeof window === 'object';\nexports.on = function (obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return obj.addEventListener.apply(obj, args);\n};\nexports.off = function (obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return obj.removeEventListener.apply(obj, args);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar util_1 = require(\"./util\");\nvar defaultTarget = util_1.isClient ? window : null;\nvar useEvent = function (name, handler, target, options) {\n    if (target === void 0) { target = defaultTarget; }\n    react_1.useEffect(function () {\n        if (!handler) {\n            return;\n        }\n        if (!target) {\n            return;\n        }\n        var fn = target.addEventListener || target.on;\n        fn.call(target, name, handler, options);\n        return function () {\n            var cleanFn = target.removeEventListener || target.off;\n            cleanFn.call(target, name, handler, options);\n        };\n    }, [name, handler, target, JSON.stringify(options)]);\n};\nexports.default = useEvent;\n","'use strict';\n\nvar KEBAB_REGEX = /[A-Z]/g;\n\nvar hash = function (str) {\n    var hash = 5381, i = str.length;\n\n    while (i) hash = (hash * 33) ^ str.charCodeAt(--i);\n\n    return '_' + (hash >>> 0).toString(36);\n};\n\nexports.create = function (config) {\n    config = config || {};\n    var assign = config.assign || Object.assign;\n    var client = typeof window === 'object';\n\n    // Check if we are really in browser environment.\n    if (process.env.NODE_ENV !== 'production') {\n        if (client) {\n            if ((typeof document !== 'object') || !document.getElementsByTagName('HTML')) {\n                console.error(\n                    'nano-css detected browser environment because of \"window\" global, but ' +\n                    '\"document\" global seems to be defective.'\n                );\n            }\n        }\n    }\n\n    var renderer = assign({\n        raw: '',\n        pfx: '_',\n        client: client,\n        assign: assign,\n        stringify: JSON.stringify,\n        kebab: function (prop) {\n            return prop.replace(KEBAB_REGEX, '-$&').toLowerCase();\n        },\n        decl: function (key, value) {\n            key = renderer.kebab(key);\n            return key + ':' + value + ';';\n        },\n        hash: function (obj) {\n            return hash(renderer.stringify(obj));\n        },\n        selector: function (parent, selector) {\n            return parent + (selector[0] === ':' ? ''  : ' ') + selector;\n        },\n        putRaw: function (rawCssRule) {\n            renderer.raw += rawCssRule;\n        },\n    }, config);\n\n    if (renderer.client) {\n        if (!renderer.sh)\n            document.head.appendChild(renderer.sh = document.createElement('style'));\n\n        if (process.env.NODE_ENV !== 'production') {\n            renderer.sh.setAttribute('data-nano-css-dev', '');\n\n            // Test style sheet used in DEV mode to test if .insetRule() would throw.\n            renderer.shTest = document.createElement('style');\n            renderer.shTest.setAttribute('data-nano-css-dev-tests', '');\n            document.head.appendChild(renderer.shTest);\n        }\n\n        renderer.putRaw = function (rawCssRule) {\n            // .insertRule() is faster than .appendChild(), that's why we use it in PROD.\n            // But CSS injected using .insertRule() is not displayed in Chrome Devtools,\n            // that's why we use .appendChild in DEV.\n            if (process.env.NODE_ENV === 'production') {\n                var sheet = renderer.sh.sheet;\n\n                // Unknown pseudo-selectors will throw, this try/catch swallows all errors.\n                try {\n                    sheet.insertRule(rawCssRule, sheet.cssRules.length);\n                // eslint-disable-next-line no-empty\n                } catch (error) {}\n            } else {\n                // Test if .insertRule() works in dev mode. Unknown pseudo-selectors will throw when\n                // .insertRule() is used, but .appendChild() will not throw.\n                try {\n                    renderer.shTest.sheet.insertRule(rawCssRule, renderer.shTest.sheet.cssRules.length);\n                } catch (error) {\n                    if (config.verbose) {\n                        console.error(error);\n                    }\n                }\n\n                // Insert pretty-printed CSS for dev mode.\n                renderer.sh.appendChild(document.createTextNode(rawCssRule));\n            }\n        };\n    }\n\n    renderer.put = function (selector, decls, atrule) {\n        var str = '';\n        var prop, value;\n        var postponed = [];\n\n        for (prop in decls) {\n            value = decls[prop];\n\n            if ((value instanceof Object) && !(value instanceof Array)) {\n                postponed.push(prop);\n            } else {\n                if ((process.env.NODE_ENV !== 'production') && !renderer.sourcemaps) {\n                    str += '    ' + renderer.decl(prop, value, selector, atrule) + '\\n';\n                } else {\n                    str += renderer.decl(prop, value, selector, atrule);\n                }\n            }\n        }\n\n        if (str) {\n            if ((process.env.NODE_ENV !== 'production') && !renderer.sourcemaps) {\n                str = '\\n' + selector + ' {\\n' + str + '}\\n';\n            } else {\n                str = selector + '{' + str + '}';\n            }\n            renderer.putRaw(atrule ? atrule + '{' + str + '}' : str);\n        }\n\n        for (var i = 0; i < postponed.length; i++) {\n            prop = postponed[i];\n\n            if (prop[0] === \"@\" && prop !== \"@font-face\") {\n                renderer.putAt(selector, decls[prop], prop);\n            } else {\n                renderer.put(renderer.selector(selector, prop), decls[prop], atrule);\n            }\n        }\n    };\n\n    renderer.putAt = renderer.put;\n\n    return renderer;\n};\n","'use strict';\n\nexports.addon = function (renderer) {\n    if (process.env.NODE_ENV !== 'production') {\n        require('./__dev__/warnOnMissingDependencies')('rule', renderer, ['put']);\n    }\n\n    var blocks;\n\n    if (process.env.NODE_ENV !== 'production') {\n        blocks = {};\n    }\n\n    renderer.rule = function (css, block) {\n        // Warn user if CSS selectors clash.\n        if (process.env.NODE_ENV !== 'production') {\n            if (block) {\n                if (typeof block !== 'string') {\n                    throw new TypeError(\n                        'nano-css block name must be a string. ' +\n                        'For example, use nano.rule({color: \"red\", \"RedText\").'\n                    );\n                }\n\n                if (blocks[block]) {\n                    console.error('Block name \"' + block + '\" used more than once.');\n                }\n\n                blocks[block] = 1;\n            }\n        }\n\n        block = block || renderer.hash(css);\n        block = renderer.pfx + block;\n        renderer.put('.' + block, css);\n\n        return ' ' + block;\n    };\n};\n","'use strict';\n\nexports.addon = function (renderer) {\n    var cache = {};\n\n    renderer.cache = function (css) {\n        if (!css) return '';\n\n        var key = renderer.hash(css);\n\n        if (!cache[key]) {\n            cache[key] = renderer.rule(css, key);\n        }\n\n        return cache[key];\n    };\n};\n","'use strict';\n\nexports.addon = function (renderer) {\n    if (process.env.NODE_ENV !== 'production') {\n        require('./__dev__/warnOnMissingDependencies')('hydrate', renderer, ['put']);\n    }\n\n    var hydrated = {};\n\n    renderer.hydrate = function (sh) {\n        var cssRules = sh.cssRules || sh.sheet.cssRules;\n\n        for (var i = 0; i < cssRules.length; i++)\n            hydrated[cssRules[i].selectorText] = 1;\n    };\n\n    if (renderer.client) {\n        if (renderer.sh) renderer.hydrate(renderer.sh);\n\n        var put = renderer.put;\n\n        renderer.put = function (selector, css) {\n            if (selector in hydrated) {\n                if (process.env.NODE_ENV !== 'production') {\n                    // eslint-disable-next-line\n                    console.info('Hydrated selector: ' + selector);\n                }\n\n                return;\n            }\n\n            put(selector, css);\n        };\n    }\n};\n","'use strict';\n\nexports.addon = function (renderer) {\n    renderer.selector = function (parentSelectors, selector) {\n        var parents = parentSelectors.split(',');\n        var result = [];\n        var selectors = selector.split(',');\n        var len1 = parents.length;\n        var len2 = selectors.length;\n        var i, j, sel, pos, parent, replacedSelector;\n\n        for (i = 0; i < len2; i++) {\n            sel = selectors[i];\n            pos = sel.indexOf('&');\n\n            if (pos > -1) {\n                for (j = 0; j < len1; j++) {\n                    parent = parents[j];\n                    replacedSelector = sel.replace(/&/g, parent);\n                    result.push(replacedSelector);\n                }\n            } else {\n                for (j = 0; j < len1; j++) {\n                    parent = parents[j];\n\n                    if (parent) {\n                        result.push(parent + ' ' + sel);\n                    } else {\n                        result.push(sel);\n                    }\n                }\n            }\n        }\n\n        return result.join(',');\n    };\n};\n","import { create } from \"nano-css\";\n\nimport { addon as addonRule } from \"nano-css/addon/rule\";\nimport { addon as addonCache } from \"nano-css/addon/cache\";\nimport { addon as addonHydrate } from \"nano-css/addon/hydrate\";\nimport { addon as addonNesting } from \"nano-css/addon/nesting\";\nimport { CssLikeObject } from \"nano-css/types/common\";\n\nconst nano = create({\n  pfx: \"fd\",\n  sh: document.getElementById(\"nano-css\") as any\n});\n\naddonRule(nano);\naddonCache(nano);\naddonHydrate(nano);\naddonNesting(nano);\n\nexport default Object.assign(nano, {\n  putMany(obj: Record<string, CssLikeObject>) {\n    for (const key in obj) {\n      nano.put(key, obj[key]);\n    }\n  }\n});\n","type Listener<T> = (T) => any;\n\nexport default class PicoSignal<T> {\n  private listeners = [] as Listener<T>[];\n\n  add(listener: Listener<T>) {\n    this.listeners.push(listener);\n  }\n\n  remove(listener: Listener<T>) {\n    const last = this.listeners[this.listeners.length - 1];\n    if (last === listener) {\n      this.listeners.pop();\n      return;\n    }\n\n    const i = this.listeners.indexOf(listener);\n    if (i < 0) return;\n\n    this.listeners[i] = last;\n    this.listeners.pop();\n  }\n\n  dispatch(arg: T) {\n    for (const listener of this.listeners) {\n      listener(arg);\n    }\n  }\n\n  clear() {\n    this.listeners = [];\n  }\n}\n","//@ts-ignore\nimport WASM from \"../../zig-cache/fundude.wasm\";\nimport PicoSignal from \"./PicoSignal\";\n\nObject.assign(window, { WASM });\n\nexport interface PtrMatrix extends PtrArray {\n  width: number;\n  height: number;\n}\n\nexport class PtrArray {\n  public base: Uint8Array;\n  readonly ptr: number;\n  readonly _length: number;\n\n  constructor(ptr: number, length: number) {\n    this.ptr = ptr;\n    this._length = length;\n    this.base = new Uint8Array(WASM.memory.buffer, ptr, length);\n  }\n\n  static clone(array: Uint8Array): PtrArray {\n    const ptr = WASM.malloc(array.length);\n    const ptrArray = new PtrArray(ptr, array.length);\n    ptrArray.base.set(array);\n    return ptrArray;\n  }\n\n  static matrix(ptr: number, width: number, height: number): PtrMatrix {\n    return Object.assign(new PtrArray(ptr, width * height), {\n      width,\n      height\n    });\n  }\n\n  length(): number {\n    if (this.base.length == 0) {\n      this.base = new Uint8Array(WASM.memory.buffer, this.ptr, this._length);\n    }\n\n    return this.base.length;\n  }\n}\n\nfunction toUTF8(ptr: number) {\n  const scan = new Uint8Array(WASM.memory.buffer, ptr);\n  const end = scan.findIndex(c => c === 0);\n  const rawBytes = scan.subarray(0, end);\n  return new TextDecoder(\"utf-8\").decode(rawBytes);\n}\n\nexport const MMU_OFFSETS = {\n  shift: 0x8000,\n  segments: [\n    { start: 0x8000, end: 0xa000 - 1, name: \"vram\" },\n    { start: 0xc000, end: 0xe000 - 1, name: \"ram\" },\n    { start: 0xfe00, end: 0xfea0 - 1, name: \"oam\" },\n    { start: 0xff00, end: 0xff4c - 1, name: \"io\" },\n    { start: 0xff80, end: 0xffff - 1, name: \"himem\" }\n  ]\n};\n\nenum InputBitMapping {\n  right = 1,\n  left = 2,\n  up = 4,\n  down = 8,\n\n  a = 16,\n  b = 32,\n  select = 64,\n  start = 128\n}\n\nexport type Input = keyof typeof InputBitMapping;\n\nexport default class FundudeWasm {\n  public changed = new PicoSignal<void>();\n\n  private readonly pointer: number;\n  cart!: Uint8Array;\n  private cartClone?: PtrArray;\n\n  readonly width: number;\n  readonly height: number;\n\n  constructor(cart: Uint8Array) {\n    this.pointer = WASM.fd_alloc();\n    this.init(cart);\n\n    this.width = 160;\n    this.height = 144;\n  }\n\n  screen() {\n    return PtrArray.matrix(\n      WASM.fd_screen_ptr(this.pointer),\n      this.width,\n      this.height\n    );\n  }\n\n  background() {\n    return PtrArray.matrix(WASM.fd_background_ptr(this.pointer), 256, 256);\n  }\n\n  window() {\n    return PtrArray.matrix(WASM.fd_window_ptr(this.pointer), 256, 256);\n  }\n\n  sprites() {\n    return PtrArray.matrix(\n      WASM.fd_sprites_ptr(this.pointer),\n      256 + 2 * 8,\n      256 + 2 * 16\n    );\n  }\n\n  patterns() {\n    return PtrArray.matrix(WASM.fd_patterns_ptr(this.pointer), 8, 8 * 128 * 3);\n  }\n\n  cpu() {\n    const raw = new PtrArray(WASM.fd_cpu_ptr(this.pointer), 12);\n    return Object.assign(raw, {\n      AF: () => raw.base[0] + (raw.base[1] << 8),\n      BC: () => raw.base[2] + (raw.base[3] << 8),\n      DE: () => raw.base[4] + (raw.base[5] << 8),\n      HL: () => raw.base[6] + (raw.base[7] << 8),\n      SP: () => raw.base[8] + (raw.base[9] << 8),\n      PC: () => raw.base[10] + (raw.base[11] << 8)\n    });\n  }\n\n  mmu() {\n    return new PtrArray(WASM.fd_mmu_ptr(this.pointer), 0x8000);\n  }\n\n  init(cart: Uint8Array) {\n    if (this.cartClone) {\n      WASM.free(this.cartClone.ptr);\n    }\n\n    this.cart = cart;\n    this.cartClone = PtrArray.clone(cart);\n\n    const status = WASM.fd_init(this.pointer, cart.length, this.cartClone.ptr);\n    switch (status) {\n      case 0:\n        break;\n      case 1:\n        throw new Error(\"Cart unsupported\");\n      case 2:\n        throw new Error(\"Cart size invalid\");\n      case 3:\n        throw new Error(\"Cart ram size error\");\n      default:\n        throw new Error(\"Unknown error\");\n    }\n\n    this.changed.dispatch();\n  }\n\n  dealloc() {\n    if (this.cartClone) {\n      WASM.free(this.cartClone.ptr);\n    }\n    WASM.free(this.pointer);\n  }\n\n  breakpoint: number = -1;\n  setBreakpoint(bp: number) {\n    this.breakpoint = bp;\n    WASM.fd_set_breakpoint(this.pointer, bp);\n    this.changed.dispatch();\n  }\n\n  reset() {\n    WASM.fd_reset(this.pointer);\n    this.changed.dispatch();\n  }\n\n  step(): number {\n    const cycles = WASM.fd_step(this.pointer);\n    this.changed.dispatch();\n    return cycles;\n  }\n\n  stepFrame(frames = 1): number {\n    const cycles = WASM.fd_step_frames(this.pointer, frames);\n    this.changed.dispatch();\n    return cycles;\n  }\n\n  _inputStatus(raw: number): Record<Input, boolean> {\n    const mapping = {} as Record<Input, boolean>;\n    for (let bit = 0; bit < 8; bit++) {\n      const mask = 1 << bit;\n      const input = InputBitMapping[mask];\n      const value = Boolean(raw & mask);\n      mapping[input] = value;\n    }\n    return mapping;\n  }\n\n  inputPress(input: Input) {\n    const val = InputBitMapping[input];\n    return this._inputStatus(WASM.fd_input_press(this.pointer, val));\n  }\n\n  inputRelease(input: Input) {\n    const val = InputBitMapping[input];\n    return this._inputStatus(WASM.fd_input_release(this.pointer, val));\n  }\n\n  inputReleaseAll() {\n    return this._inputStatus(WASM.fd_input_release(this.pointer, 0xff));\n  }\n\n  static *disassemble(cart: Uint8Array): IterableIterator<[number, string]> {\n    const fd = new FundudeWasm(cart);\n    try {\n      while (true) {\n        const addr = fd.cpu().PC();\n        const outPtr = WASM.fd_disassemble(fd.pointer);\n        if (!outPtr) {\n          return;\n        }\n        yield [addr, toUTF8(outPtr)];\n      }\n    } finally {\n      fd.dealloc();\n    }\n  }\n}\n","import React from \"react\";\nimport FundudeWasm from \".\";\n\ninterface Item {\n  fd: FundudeWasm;\n  run: () => void;\n  pause: () => void;\n}\n\ninterface Props {\n  autoBoot: boolean;\n  bootCart: Uint8Array;\n  children: React.ReactNode;\n}\n\ninterface State {\n  fd: FundudeWasm;\n  isRunning: boolean;\n}\n\nexport const Context = React.createContext<Item>(null!);\n\nexport class Provider extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      fd: new FundudeWasm(props.bootCart),\n      isRunning: false\n    };\n\n    Object.assign(window, { fd: this.state.fd });\n\n    this.handleChange = this.handleChange.bind(this);\n    this.run = this.run.bind(this);\n    this.pause = this.pause.bind(this);\n    this.spin = this.spin.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.autoBoot) {\n      this.run();\n    } else {\n      this.state.fd.changed.add(this.handleChange);\n    }\n  }\n\n  handleChange() {\n    this.forceUpdate();\n  }\n\n  spin() {\n    if (!this.state.isRunning) {\n      return;\n    }\n\n    this.state.fd.stepFrame();\n\n    if (this.state.fd.cpu().PC() === this.state.fd.breakpoint) {\n      return this.pause();\n    }\n\n    requestAnimationFrame(this.spin);\n  }\n\n  run() {\n    if (!this.state.isRunning) {\n      this.state.fd.changed.remove(this.handleChange);\n      this.setState({ isRunning: true }, this.spin);\n    }\n  }\n\n  pause() {\n    if (this.state.isRunning) {\n      this.state.fd.changed.add(this.handleChange);\n      this.setState({ isRunning: false });\n    }\n  }\n\n  render() {\n    if (!this.state.fd) {\n      return null;\n    }\n\n    return (\n      <Context.Provider\n        value={{ fd: this.state.fd, run: this.run, pause: this.pause }}\n      >\n        {this.props.children}\n      </Context.Provider>\n    );\n  }\n}\n\nexport default { Context, Provider };\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport nano from \"./nano\";\nimport { PtrMatrix } from \"../wasm\";\nimport PicoSignal from \"../wasm/PicoSignal\";\n\nconst CSS = {\n  root: nano.rule({\n    position: \"relative\",\n    backgroundColor: \"white\",\n    padding: \"1px\",\n    flex: \"0 auto\"\n  }),\n\n  draw: nano.rule({\n    position: \"relative\",\n    display: \"block\",\n    margin: \"-1px\"\n  }),\n\n  grid: nano.rule({\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    transformOrigin: \"0 0\",\n    backgroundSize: `8px 8px`,\n    zIndex: 0\n  })\n};\n\nconst PADDING = 1;\n\nconst TRANSPARENCY_PALETTE = [0, 85, 170, 255];\n\nconst WHITE = Uint8Array.of(15, 56, 15, 1);\n\nexport default function Display(props: {\n  className?: string;\n  pixels: () => PtrMatrix;\n  scale?: number;\n  signal?: PicoSignal<any>;\n  gridColor?: string;\n  blend?: boolean;\n}) {\n  const pixels = props.pixels();\n\n  const prev = React.useMemo(() => {\n    return new Uint8Array(pixels.width * pixels.height);\n  }, []);\n\n  const imageData = React.useMemo(() => {\n    const imageData = new ImageData(pixels.width, pixels.height);\n    for (let i = 0; i < pixels.length(); i++) {\n      imageData.data.set(WHITE, 4 * i);\n    }\n    return imageData;\n  }, []);\n\n  const drawRef = React.useRef<HTMLCanvasElement>(null);\n\n  const render = React.useCallback(() => {\n    if (!drawRef.current) return;\n\n    const ctx = drawRef.current.getContext(\"2d\")!;\n    const pixels = props.pixels();\n    if (props.blend) {\n      for (let i = 0; i < pixels.length(); i++) {\n        const shade = pixels.base[i];\n        const prevAlpha = prev[i];\n        // const newAlpha = TRANSPARENCY_PALETTE[shade];\n        const newAlpha = shade * 85;\n        imageData.data[4 * i + 3] = (prevAlpha + newAlpha) >> 1;\n        prev[i] = newAlpha;\n      }\n    } else {\n      for (let i = 0; i < pixels.length(); i++) {\n        const shade = pixels.base[i];\n        // const newAlpha = TRANSPARENCY_PALETTE[shade];\n        const newAlpha = shade * 85;\n        imageData.data[4 * i + 3] = newAlpha;\n      }\n    }\n    ctx.putImageData(imageData, PADDING, PADDING);\n  }, []);\n\n  React.useEffect(render, [drawRef.current]);\n\n  React.useEffect(() => {\n    if (props.signal) {\n      const signal = props.signal;\n      signal.add(render);\n      return () => signal.remove(render);\n    }\n  }, [props.signal]);\n\n  const scale = props.scale || 1;\n  const width = pixels.width + PADDING * 2;\n  const height = pixels.height + PADDING * 2;\n\n  return (\n    <div className={cx(CSS.root, props.className)}>\n      {props.gridColor && (\n        <div\n          className={CSS.grid}\n          style={{\n            width: pixels.width + PADDING * 2,\n            height: pixels.height + PADDING * 2,\n            transform: `scale(${scale})`,\n            backgroundImage: [\n              `linear-gradient(to right, ${props.gridColor} 2px, transparent 1px)`,\n              `linear-gradient(to bottom, ${props.gridColor} 2px, transparent 1px)`\n            ].join(\",\")\n          }}\n        />\n      )}\n      <canvas\n        ref={drawRef}\n        className={CSS.draw}\n        width={width}\n        height={height}\n        style={{ width: width * scale }}\n      />\n    </div>\n  );\n}\n","export function mapObject<E>(\n  obj: any,\n  callback: (value: any, key?: string) => E\n): E[] {\n  const result = [];\n  for (const key in obj) {\n    result.push(callback(obj[key], key));\n  }\n  return result;\n}\n\ntype Indexable = string | number | symbol;\n\nexport function fromEntries<K extends Indexable, V>(\n  entries: Iterable<[K, V]>\n): Record<K, V> {\n  const result = {} as Record<K, V>;\n  for (const [key, value] of entries) {\n    result[key] = value;\n  }\n  return result;\n}\n\nexport function clamp(value: number, lower: number, upper: number) {\n  if (value === value) {\n    if (upper !== undefined) {\n      value = value <= upper ? value : upper;\n    }\n    if (lower !== undefined) {\n      value = value >= lower ? value : lower;\n    }\n  }\n\n  return value;\n}\n","export function deferred<T>() {\n  let resolve: (value?: T | PromiseLike<T> | undefined) => void;\n  let reject: (reason?: any) => void;\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return Object.assign(promise, { resolve: resolve!, reject: reject! });\n}\n\nexport function nextAnimationFrame() {\n  return new Promise(requestAnimationFrame);\n}\n\nexport function readAsArray(file: File) {\n  const reader = new FileReader();\n  return new Promise<ArrayBuffer>((resolve, reject) => {\n    reader.onload = evt => resolve((evt as any).target.result);\n    reader.onerror = reject;\n    reader.readAsArrayBuffer(file);\n  });\n}\n","import sheepitup from \"./sheepitup.gb\";\n\nexport default { sheepitup };\n","import cpu_01_special from \"./cpu-01-special.gb\";\nimport cpu_02_interrupts from \"./cpu-02-interrupts.gb\";\nimport cpu_03_op_sp_hl from \"./cpu-03-op-sp-hl.gb\";\nimport cpu_04_op_r_imm from \"./cpu-04-op-r-imm.gb\";\nimport cpu_05_op_rp from \"./cpu-05-op-rp.gb\";\nimport cpu_06_ld_r_r from \"./cpu-06-ld-r-r.gb\";\nimport cpu_07_jr_jp_call_ret_rst from \"./cpu-07-jr-jp-call-ret-rst.gb\";\nimport cpu_08_misc_instrs from \"./cpu-08-misc-instrs.gb\";\nimport cpu_09_op_r_r from \"./cpu-09-op-r-r.gb\";\nimport cpu_10_bit_ops from \"./cpu-10-bit-ops.gb\";\nimport cpu_11_op_a_hl from \"./cpu-11-op-a-hl.gb\";\n\nexport default {\n  cpu_01_special,\n  cpu_02_interrupts,\n  cpu_03_op_sp_hl,\n  cpu_04_op_r_imm,\n  cpu_05_op_rp,\n  cpu_06_ld_r_r,\n  cpu_07_jr_jp_call_ret_rst,\n  cpu_08_misc_instrs,\n  cpu_09_op_r_r,\n  cpu_10_bit_ops,\n  cpu_11_op_a_hl\n};\n","import blargg from \"./blargg\";\n\nexport default { blargg };\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport nano from \"./nano\";\nimport { mapObject } from \"./smalldash\";\nimport { readAsArray } from \"./promise\";\n\nimport FD from \"../wasm/react\";\n\nimport ROMS from \"../roms\";\nimport DEBUG_ROMS from \"../roms/debug\";\n\nconst CSS = {\n  root: nano.rule({\n    position: \"relative\",\n    zIndex: 1,\n    width: \"350px\"\n  }),\n\n  toggler: nano.rule({\n    position: \"relative\",\n    display: \"block\",\n    zIndex: 1,\n    font: \"12px monospace\",\n    width: \"100%\",\n    border: \"none\",\n    padding: \"0 10px\",\n    background: \"#d9d9d9\",\n    borderRadius: \"3px 3px 0 0\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\"\n  }),\n\n  selector: nano.rule({\n    position: \"absolute\",\n    overflow: \"hidden\",\n    top: \"100%\",\n    width: \"100%\",\n    background: \"rgba(255, 255, 255, 0.8)\",\n    transition: \"300ms ease-in-out height\",\n    padding: \"0 10px\",\n    height: \"0\",\n    borderRadius: \"0 0 3px 3px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n\n    \"&.active\": {\n      height: \"350px\"\n    }\n  }),\n\n  selectorList: nano.rule({\n    font: \"14px monospace\",\n    flex: 1,\n    overflow: \"hidden\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  }),\n\n  backdrop: nano.rule({\n    position: \"fixed\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    background: \"#000000\",\n    opacity: 0,\n    transition: \"300ms ease-in-out opacity\",\n    pointerEvents: \"none\",\n\n    \"&.active\": {\n      pointerEvents: \"initial\",\n      opacity: 0.8\n    }\n  }),\n\n  prompt: nano.rule({\n    marginTop: \"8px\",\n\n    \"&:before, &:after\": {\n      padding: \"0 4px\",\n      content: \"'—'\"\n    }\n  }),\n\n  upload: nano.rule({\n    display: \"inline-block\",\n    cursor: \"pointer\",\n    background: \"white\",\n    border: \"1px solid black\",\n    borderRadius: \"4px\",\n    padding: \"4px 20px\",\n    marginBottom: \"10px\"\n  }),\n\n  hidden: nano.rule({\n    display: \"none\"\n  })\n};\n\nexport default function CartSelect(props: {\n  startName: string;\n  debug?: boolean;\n}) {\n  const { fd } = React.useContext(FD.Context);\n  const [choosing, setChoosing] = React.useState(false);\n  const [name, setName] = React.useState(props.startName);\n\n  const selectCart = React.useCallback(\n    (name: string, data: Uint8Array) => {\n      setChoosing(false);\n      fd.init(data);\n      setName(name);\n    },\n    [fd]\n  );\n\n  type LinkClicked = React.MouseEventHandler<HTMLAnchorElement>;\n  const downloadCart = React.useCallback<LinkClicked>(async event => {\n    event.preventDefault();\n    const link = event.currentTarget;\n    const resp = await fetch(link.href);\n    if (!resp.ok) {\n      throw resp;\n    }\n\n    const data = new Uint8Array(await resp.arrayBuffer());\n    selectCart(link.text, data);\n  }, []);\n\n  type FileChanged = React.ChangeEventHandler<HTMLInputElement>;\n  const onFile = React.useCallback<FileChanged>(async event => {\n    const file = event.currentTarget.files[0] as File;\n    const data = new Uint8Array(await readAsArray(file));\n    selectCart(file.name, data);\n  }, []);\n\n  const carts = props.debug ? DEBUG_ROMS.blargg : ROMS;\n\n  return (\n    <div className={CSS.root}>\n      <button className={CSS.toggler} onClick={() => setChoosing(!choosing)}>\n        {name}\n      </button>\n\n      <div\n        className={cx(CSS.backdrop, choosing && \"active\")}\n        onClick={() => setChoosing(false)}\n      />\n\n      <div className={cx(CSS.selector, choosing && \"active\")}>\n        <h3 className={CSS.prompt}>try one of these games</h3>\n        <div className={cx(CSS.selectorList, choosing && \"active\")}>\n          {mapObject(carts, (value, name) => (\n            <a key={name} href={value} onClick={downloadCart}>\n              {name}\n            </a>\n          ))}\n        </div>\n\n        <h3 className={CSS.prompt}>or</h3>\n        <label className={CSS.upload}>\n          <span>Upload a ROM</span>\n          <input\n            className={CSS.hidden}\n            type=\"file\"\n            onChange={onFile}\n            onClick={event => (event.currentTarget.value = \"\")}\n          />\n        </label>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport useEvent from \"react-use/lib/useEvent\";\n\nimport nano from \"./nano\";\n\nimport FundudeWasm, { Input } from \"../wasm\";\n\nconst CSS = {\n  root: nano.rule({\n    paddingTop: \"90px\",\n    display: \"flex\",\n    flex: \"1\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    touchAction: \"none\"\n  }),\n\n  button: nano.rule({\n    display: \"inline-block\",\n    background: \"#082A08\",\n    boxShadow: \"inset 0 0 2px 2px #082A08\",\n    border: \"none\",\n    color: \"white\",\n    fontFamily: \"Helvetica, Arial, sans-serif\",\n    fontSize: \"24px\",\n\n    \"&.pressed\": {\n      background: \"white\",\n      color: \"#082A08\"\n    }\n  }),\n\n  dpad: {\n    base: nano.rule({\n      position: \"relative\",\n      width: \"90px\",\n      height: \"90px\"\n    }),\n    direction: nano.rule({\n      position: \"absolute\",\n      height: \"33.3333%\",\n      width: \"33.3333%\"\n    }),\n    up: nano.rule({ left: \"33.3333%\", top: 0 }),\n    down: nano.rule({ left: \"33.3333%\", bottom: 0 }),\n    left: nano.rule({ left: 0, top: \"33.3333%\" }),\n    right: nano.rule({ right: 0, top: \"33.3333%\" })\n  },\n\n  buttons: {\n    center: nano.rule({ alignSelf: \"flexEnd\" }),\n    select: nano.rule({ width: \"50px\", fontSize: \"12px\", margin: \"0 2px\" }),\n    start: nano.rule({ width: \"50px\", fontSize: \"12px\", margin: \"0 2px\" }),\n\n    base: nano.rule({}),\n    a: nano.rule({ width: \"40px\", height: \"40px\", margin: \"0 2px\", borderRadius: \"100%\" }),\n    b: nano.rule({ width: \"40px\", height: \"40px\", margin: \"0 2px\", borderRadius: \"100%\" }),\n  }\n};\n\nconst INITIAL_STATE = {\n  up: false,\n  down: false,\n  left: false,\n  right: false,\n\n  select: false,\n  start: false,\n  a: false,\n  b: false\n};\n\nconst KEY_MAP: Record<string, Input> = {\n  KeyW: \"up\",\n  KeyD: \"right\",\n  KeyS: \"down\",\n  KeyA: \"left\",\n\n  ArrowUp: \"up\",\n  ArrowRight: \"right\",\n  ArrowDown: \"down\",\n  ArrowLeft: \"left\",\n\n  Backspace: \"select\",\n  Backslash: \"select\",\n  Enter: \"start\",\n\n  KeyN: \"select\",\n  KeyM: \"start\",\n  Comma: \"b\",\n  Period: \"a\",\n\n  KeyO: \"select\",\n  KeyP: \"start\",\n  BracketLeft: \"b\",\n  BracketRight: \"a\"\n};\n\nexport default function Controller(props: { fd: FundudeWasm }) {\n  const [inputs, setInputs] = React.useState(INITIAL_STATE);\n  const [clicking, setClicking] = React.useState(false);\n\n  function handleMouseDown(event: React.MouseEvent<HTMLButtonElement>) {\n    setClicking(true);\n    setInputs(props.fd.inputPress(event.currentTarget.value as any));\n  }\n\n  function handleMouseEnter(event: React.MouseEvent<HTMLButtonElement>) {\n    if (!clicking) {\n      return;\n    }\n    event.currentTarget.focus();\n    setInputs(props.fd.inputPress(event.currentTarget.value as any));\n  }\n\n  function handleMouseLeave(event: React.MouseEvent<HTMLButtonElement>) {\n    if (!clicking) {\n      return;\n    }\n    event.currentTarget.blur();\n    setInputs(props.fd.inputRelease(event.currentTarget.value as any));\n  }\n\n  useEvent(\"mouseup\", (event: React.MouseEvent<HTMLButtonElement>) => {\n    if (!clicking) {\n      return;\n    }\n    setClicking(false);\n    event.currentTarget.blur();\n    setInputs(props.fd.inputReleaseAll());\n  });\n\n  function handleTouch(event: React.TouchEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    setInputs(props.fd.inputPress(event.currentTarget.value as any));\n  }\n\n  function handleUntouch(event: React.TouchEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    setInputs(props.fd.inputRelease(event.currentTarget.value as any));\n  }\n\n  useEvent(\"keydown\", (event: KeyboardEvent) => {\n    if (event.target.nodeName == \"INPUT\") {\n      return;\n    }\n\n    const input = KEY_MAP[event.code];\n    if (input) {\n      event.preventDefault();\n      setInputs(props.fd.inputPress(input));\n    }\n  });\n  useEvent(\"keyup\", (event: KeyboardEvent) => {\n    if (event.target.nodeName == \"INPUT\") {\n      return;\n    }\n\n    const input = KEY_MAP[event.code];\n    if (input) {\n      event.preventDefault();\n      setInputs(props.fd.inputRelease(input));\n    }\n  });\n\n  function Button(props: {\n    value: Input;\n    className: string;\n    children?: string;\n  }) {\n    return (\n      <button\n        value={props.value}\n        className={cx(CSS.button, props.className, {\n          pressed: inputs[props.value]\n        })}\n        onMouseDown={handleMouseDown}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onTouchStart={handleTouch}\n        onTouchEnd={handleUntouch}\n      >\n        {props.children}\n      </button>\n    );\n  }\n\n  return (\n    <div className={CSS.root}>\n      <div className={CSS.dpad.base}>\n        <Button value=\"up\" className={cx(CSS.dpad.direction, CSS.dpad.up)} />\n        <Button\n          value=\"down\"\n          className={cx(CSS.dpad.direction, CSS.dpad.down)}\n        />\n        <Button\n          value=\"left\"\n          className={cx(CSS.dpad.direction, CSS.dpad.left)}\n        />\n        <Button\n          value=\"right\"\n          className={cx(CSS.dpad.direction, CSS.dpad.right)}\n        />\n      </div>\n\n      <div className={CSS.buttons.center}>\n        <Button value=\"select\" className={CSS.buttons.select}>\n          Select\n        </Button>\n        <Button value=\"start\" className={CSS.buttons.start}>\n          Start\n        </Button>\n      </div>\n\n      <div className={CSS.buttons.base}>\n        <Button value=\"b\" className={CSS.buttons.b}>\n          B\n        </Button>\n        <Button value=\"a\" className={CSS.buttons.a}>\n          A\n        </Button>\n      </div>\n    </div>\n  );\n}\n","function asCart(hexString: string): Uint8Array {\n  const result = new Uint8Array(32 * 1024);\n  hexString\n    .replace(/\\s+/g, \"\")\n    .match(/.{1,2}/g)!\n    .forEach((s, i) => {\n      result[i] = parseInt(s, 16);\n    });\n  return result;\n}\n\nexport const BOOTLOADER = asCart(`\n31 FE FF AF 21 FF 9F 32 CB 7C 20 FB 21 26 FF 0E\n11 3E 80 32 E2 0C 3E F3 E2 32 3E 77 77 3E FC E0\n47 11 04 01 21 10 80 1A CD 95 00 CD 96 00 13 7B\nFE 34 20 F3 11 D8 00 06 08 1A 13 22 23 05 20 F9\n3E 19 EA 10 99 21 2F 99 0E 0C 3D 28 08 32 0D 20\nF9 2E 0F 18 F3 67 3E 64 57 E0 42 3E 91 E0 40 04\n1E 02 0E 0C F0 44 FE 90 20 FA 0D 20 F7 1D 20 F2\n0E 13 24 7C 1E 83 FE 62 28 06 1E C1 FE 64 20 06\n7B E2 0C 3E 87 E2 F0 42 90 E0 42 15 20 D2 05 20\n4F 16 20 18 CB 4F 06 04 C5 CB 11 17 C1 CB 11 17\n05 20 F5 22 23 22 23 C9 CE ED 66 66 CC 0D 00 0B\n03 73 00 83 00 0C 00 0D 00 08 11 1F 88 89 00 0E\nDC CC 6E E6 DD DD D9 99 BB BB 67 63 6E 0E EC CC\nDD DC 99 9F BB B9 33 3E 3C 42 B9 A5 B9 A5 42 3C\n21 04 01 11 A8 00 1A 13 BE 20 FE 23 7D FE 34 20\nF5 06 19 78 86 23 05 20 FB 86 20 FE 3E 01 E0 50\n\n00 00 00 00\n\nFF CF 66 66 DD DD 99 DF 88 8B 0C C3 77 66 9D DD\nBB BB 77 66 9D DD EE 8E FC CC 66 73 DD D9 B9 99\nB8 88 3C C0 66 77 DD D8 BB FE 66 77 DD D9 E8 EE\n`);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M38.81.27L37.4 8.96H20.54l-1.72 10.58h14.27l-1.37 8.72H17.4L14.13 49H.58L8.33.27H38.8zm52.67 0l-4.15 29.78c-.6 4.31-1.94 7.93-4.05 10.86a19.35 19.35 0 01-8.13 6.56 28.05 28.05 0 01-11.29 2.16c-5.61 0-10.1-.98-13.46-2.95-3.35-1.97-5.7-4.32-7.04-7.07a17.99 17.99 0 01-2.02-7.9c0-2.1.22-4.5.65-7.25L45.5.27h11.9l-3.58 25.46c-.2 1.26-.3 2.5-.3 3.69 0 2.65.73 4.86 2.2 6.62 1.46 1.77 4.15 2.66 8.07 2.66 1.99 0 3.77-.32 5.35-.97a9.44 9.44 0 004.05-3.27c1.13-1.53 1.9-3.6 2.3-6.2L79.6.27h11.9zm55.84 0L140.04 49h-11.6l-19.06-29.32L104.92 49H92.5L99.7.27h11.68l19.09 29.29 4.4-29.29h12.44zm16.93 28.68v-10h-10v10h10zm56.65-4.8c0 5.4-1.03 9.96-3.1 13.64a19.81 19.81 0 01-9.19 8.36c-4.07 1.9-9.1 2.85-15.1 2.85h-22.46l7-48.73h17.92c4.24 0 7.95.64 11.13 1.9a20.9 20.9 0 017.82 5.24 21.4 21.4 0 014.52 7.61 28.04 28.04 0 011.46 9.12zm-12.7.17c0-2.44-.46-4.8-1.38-7.1a12.65 12.65 0 00-5.12-5.85c-2.48-1.61-5.93-2.41-10.33-2.41h-2l-4.54 31.32h6.54c3.11 0 5.8-.47 8.03-1.4a13.29 13.29 0 008-8.83c.54-1.83.8-3.74.8-5.73zM275.73.27l-4.16 29.78c-.58 4.31-1.93 7.93-4.04 10.86a19.35 19.35 0 01-8.13 6.56 28.05 28.05 0 01-11.3 2.16c-5.6 0-10.09-.98-13.45-2.95-3.36-1.97-5.7-4.32-7.05-7.07a17.99 17.99 0 01-2-7.9c0-2.1.2-4.5.63-7.25L229.74.27h11.9l-3.58 25.46c-.2 1.26-.3 2.5-.3 3.69 0 2.65.73 4.86 2.2 6.62 1.46 1.77 4.15 2.66 8.07 2.66 1.99 0 3.77-.32 5.34-.97a9.44 9.44 0 004.06-3.27c1.13-1.53 1.9-3.6 2.3-6.2l4.1-27.99h11.9zm50.88 23.87c0 5.42-1.03 9.97-3.1 13.65a19.81 19.81 0 01-9.19 8.36c-4.07 1.9-9.1 2.85-15.1 2.85h-22.46l7-48.73h17.92c4.24 0 7.95.64 11.13 1.9a20.9 20.9 0 017.82 5.24 21.4 21.4 0 014.52 7.61 28.04 28.04 0 011.46 9.12zm-12.7.18c0-2.44-.46-4.8-1.38-7.1a12.65 12.65 0 00-5.12-5.85c-2.48-1.61-5.93-2.41-10.33-2.41h-2l-4.54 31.32h6.54c3.11 0 5.8-.47 8.03-1.4a13.29 13.29 0 008-8.83c.54-1.83.8-3.74.8-5.73zm-140.48 4.67h-8.74v9.96h-10.82V29h-10.33l1.51-10.12h8.82V8.95h10.78v9.92h10.24l-1.46 10.12zM367.95.27l-1.23 8.69H347l-1.52 10.58h17.13l-1.24 8.72h-17.26l-1.65 12.02h23.98L365.2 49h-36.53L335.75.27h32.2z\"\n});\n\nconst SvgLogo = props => React.createElement(\"svg\", _extends({\n  width: 552,\n  height: 75,\n  viewBox: \"0 0 368 50\"\n}, props), _ref);\n\nexport default SvgLogo;","import React from \"react\";\n\nimport FD from \"../wasm/react\";\nimport nano from \"./nano\";\n\nimport Display from \"./Display\";\nimport CartSelect from \"./CartSelect\";\nimport Controller from \"./Controller\";\nimport { BOOTLOADER } from \"./data\";\n\nconst LazyDebug = {\n  Left: React.lazy(() =>\n    import(\"./Debug\").then(mod => ({ default: mod.Left }))\n  ),\n  Right: React.lazy(() =>\n    import(\"./Debug\").then(mod => ({ default: mod.Right }))\n  )\n};\n\n//@ts-ignore\nimport Logo from \"./logo.svg\";\n\nconst CSS = {\n  root: nano.rule({\n    overflow: \"hidden\",\n    width: \"100vw\",\n    height: \"100vh\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  }),\n\n  app: nano.rule({\n    marginTop: \"4px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  }),\n\n  shell: nano.rule({\n    padding: \"20px 16px\",\n    background: \"#f5f5dc\",\n    boxShadow: \"inset 0 0 0 4px rgba(32, 32, 32, 0.5)\",\n    borderRadius: \"8px 8px 40px 40px\"\n  }),\n\n  displayWrapper: nano.rule({\n    backgroundColor: \"#606060\",\n    padding: \"20px 50px 0\",\n    borderRadius: \"8px\"\n  }),\n\n  display: nano.rule({\n    maxWidth: \"100vw\",\n    background: \"#b1c062\"\n  }),\n\n  title: nano.rule({\n    position: \"relative\",\n    textTransform: \"uppercase\",\n    fontFamily: \"'Gill Sans', Verdana, sans-serif\",\n    fontWeight: \"bold\",\n    fontStyle: \"italic\",\n    letterSpacing: \"-0.06em\",\n    color: \"transparent\"\n  }),\n\n  titleSymbol: nano.rule({\n    fontSize: \"0.5em\",\n    verticalAlign: \"middle\"\n  }),\n\n  logo: nano.rule({\n    color: \"white\",\n    position: \"absolute\",\n    top: \"20%\",\n    width: \"auto\",\n    height: \"59%\",\n    pointerEvents: \"none\"\n  }),\n\n  controls: nano.rule({\n    height: \"300px\",\n    width: \"324px\",\n    margin: \"0 auto\"\n  })\n};\n\nexport function App(props: { debug?: boolean }) {\n  const { fd } = React.useContext(FD.Context);\n\n  return (\n    <div className={CSS.app}>\n      <CartSelect startName=\"{insert cart}\" debug={props.debug} />\n      <div className={CSS.shell}>\n        <div className={CSS.displayWrapper}>\n          <Display\n            className={CSS.display}\n            pixels={() => fd.screen()}\n            signal={fd.changed}\n            scale={2}\n            blend\n          />\n          <h1 className={CSS.title}>\n            <Logo className={CSS.logo} />\n            FUN\n            <i className={CSS.titleSymbol}>&#10012;</i>\n            DUDE\n          </h1>\n        </div>\n        <div className={CSS.controls}>\n          <Controller fd={fd} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function(props: { debug?: boolean }) {\n  return (\n    <FD.Provider bootCart={BOOTLOADER} autoBoot={!props.debug}>\n      <div className={CSS.root}>\n        <React.Suspense fallback={<div />}>\n          {props.debug && <LazyDebug.Left />}\n        </React.Suspense>\n        <App debug={props.debug} />\n        <React.Suspense fallback={<div />}>\n          {props.debug && <LazyDebug.Right />}\n        </React.Suspense>\n      </div>\n    </FD.Provider>\n  );\n}\n","import React from \"react\";\nimport nano from \"./nano\";\n\nconst CSS = {\n  topright: nano.rule({\n    position: \"fixed\",\n    right: \"10px\",\n    maxWidth: \"200px\"\n  }),\n\n  item: nano.rule({\n    marginTop: \"10px\",\n    border: \"1px solid black\",\n    padding: \"10px\",\n    borderRadius: \"4px\"\n  })\n};\n\ninterface Toast {\n  title: string;\n  body: React.ReactNode;\n}\n\ninterface Toaster {\n  toasts: Toast[];\n  add: (toast: Toast) => any;\n}\n\nexport const Context = React.createContext<Toaster>(null!);\n\ninterface Props {\n  show?: \"topright\";\n  children: React.ReactNode;\n}\n\ninterface State {\n  toasts: Toast[];\n  fatal: boolean;\n}\n\nexport class Provider extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n\n    this.add = this.add.bind(this);\n    this.error = this.error.bind(this);\n\n    this.state = {\n      toasts: [],\n      fatal: false\n    };\n  }\n\n  componentDidCatch(error: Error) {\n    this.setState({ fatal: true });\n    this.add({ title: \"Fatal\", body: error.message || error });\n    console.error(error);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"error\", event => {\n      this.error(event.message);\n    });\n    window.addEventListener(\"unhandledrejection\", event => {\n      this.error(event.reason);\n    });\n  }\n\n  add(toast: Toast) {\n    this.setState(({ toasts }) => ({\n      toasts: [...toasts, toast]\n    }));\n  }\n\n  error(err: Error | string) {\n    this.add({ title: \"Error\", body: err.message || err });\n  }\n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          toasts: this.state.toasts,\n          add: this.add\n        }}\n      >\n        {this.props.show && (\n          <div className={CSS[this.props.show]}>\n            {this.state.toasts.map((toast, i) => (\n              <div key={i} className={CSS.item}>\n                <h3>{toast.title}</h3>\n                <div>{toast.body}</div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {!this.state.fatal && this.props.children}\n      </Context.Provider>\n    );\n  }\n}\n\nexport default { Context, Provider };\n","import React from \"react\";\nimport useEvent from \"react-use/lib/useEvent\";\n\nimport nano from \"./nano\";\n\nimport App from \"./App\";\nimport Toaster from \"./Toaster\";\n\nnano.putMany({\n  \"*\": {\n    boxSizing: \"border-box\",\n    fontFamily: \"inherit\",\n    margin: 0\n  },\n  html: {\n    touchAction: \"manipulation\"\n  },\n  input: {\n    maxWidth: \"100%\"\n  },\n  button: {\n    cursor: \"pointer\"\n  }\n});\n\nconst CSS = {\n  github: nano.rule({\n    fontFamily: \"Helvetica, 'Open Sans', Arial, sans-serif\",\n    fontWeight: 600,\n    position: \"fixed\",\n    left: \"-50px\",\n    top: \"40px\",\n    padding: \"10px 40px\",\n    transform: \"rotate(-45deg)\",\n    background: \"rgba(15, 56, 15, .3333)\",\n    boxShadow: \"0 0 2px currentColor\",\n    color: \"rgb(15, 56, 15)\",\n    textDecoration: \"none\",\n    transition: \"200ms ease box-shadow\",\n\n    \":hover\": {\n      boxShadow: \"0 0 5px 1px currentColor\"\n    }\n  })\n};\n\nexport default function Page() {\n  const [debug, setDebug] = React.useState(\n    window.location.hash.includes(\"debug\")\n  );\n  useEvent(\"hashchange\", () =>\n    setDebug(window.location.hash.includes(\"debug\"))\n  );\n\n  return (\n    <Toaster.Provider show=\"topright\">\n      <a\n        className={CSS.github}\n        href=\"https://github.com/fengb/fundude\"\n        target=\"_blank\"\n      >\n        Fork me on Github\n      </a>\n      <App debug={debug} />\n    </Toaster.Provider>\n  );\n}\n","import \"preact/debug\";\nimport { h, render, hydrate } from \"preact\";\nimport Page from \"./Page\";\n\nconst container = document.getElementById('app');\nconst r = container.hasChildNodes() ? hydrate : render;\nr(h(Page), container);\n","module.exports = function loadWASMBundle(bundle) {\n  return fetch(bundle)\n    .then(function (res) {\n      if (WebAssembly.instantiateStreaming) {\n        return WebAssembly.instantiateStreaming(res);\n      } else {\n        return res.arrayBuffer()\n          .then(function (data) {\n            return WebAssembly.instantiate(data);\n          });\n      }\n    })\n    .then(function (wasmModule) {\n      return wasmModule.instance.exports;\n    });\n};\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}